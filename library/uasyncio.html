
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>uasyncio — asynchronous I/O scheduler &#8212; MicroPython 1.18 文档</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="zlib – zlib decompression" href="zlib.html" />
    <link rel="prev" title="time – time related functions" href="time.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=blue data-md-color-accent=light-blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#library/uasyncio" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="MicroPython 1.18 文档"
           class="md-header-nav__button md-logo">
          
            &nbsp;
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">MicroPython 1.18 文档</span>
          <span class="md-header-nav__topic"> uasyncio — asynchronous I/O scheduler </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
      
  
  <script src="../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../"versions.json"",
        target_loc = "../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">MicroPython 1.18 文档</a></li>
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">MicroPython 库</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="MicroPython 1.18 文档" class="md-nav__button md-logo">
      
        <img src="../_static/" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="MicroPython 1.18 文档">MicroPython 1.18 文档</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="index.html" class="md-nav__link">MicroPython 库</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="index.html#python-standard-libraries-and-micro-libraries" class="md-nav__link">Python 标准库和微型库</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="array.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">array</span></code> – 数值数据数组</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="binascii.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">binascii</span></code> – 二进制/ASCII 转换</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="builtins.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">builtins</span></code> – builtin functions and exceptions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="cmath.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cmath</span></code> – mathematical functions for complex numbers</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="collections.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">collections</span></code> – collection and container types</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="errno.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">errno</span></code> – system error codes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="gc.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gc</span></code> – control the garbage collector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hashlib.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">hashlib</span></code> – hashing algorithms</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="heapq.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">heapq</span></code> – heap queue algorithm</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="io.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">io</span></code> – input/output streams</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="json.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">json</span></code> – JSON encoding and decoding</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="math.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">math</span></code> – mathematical functions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="os.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code> – basic “operating system” services</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="random.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">random</span></code> – generate random numbers</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="re.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">re</span></code> – simple regular expressions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="select.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">select</span></code> – wait for events on a set of streams</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="socket.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">socket</span></code> – socket module</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="ssl.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ssl</span></code> – SSL/TLS module</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="struct.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">struct</span></code> – pack and unpack primitive data types</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="sys.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sys</span></code> – system specific functions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="time.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">time</span></code> – time related functions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> <code class="xref py py-mod docutils literal notranslate"><span class="pre">uasyncio</span></code> — asynchronous I/O scheduler </label>
    
      <a href="#" class="md-nav__link md-nav__link--active"><code class="xref py py-mod docutils literal notranslate"><span class="pre">uasyncio</span></code> — asynchronous I/O scheduler</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#library-uasyncio--page-root" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">uasyncio</span></code> — asynchronous I/O scheduler</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#core-functions" class="md-nav__link">Core functions</a>
        </li>
        <li class="md-nav__item"><a href="#additional-functions" class="md-nav__link">Additional functions</a>
        </li>
        <li class="md-nav__item"><a href="#class-task" class="md-nav__link">class Task</a>
        </li>
        <li class="md-nav__item"><a href="#class-event" class="md-nav__link">class Event</a>
        </li>
        <li class="md-nav__item"><a href="#class-threadsafeflag" class="md-nav__link">class ThreadSafeFlag</a>
        </li>
        <li class="md-nav__item"><a href="#class-lock" class="md-nav__link">class Lock</a>
        </li>
        <li class="md-nav__item"><a href="#tcp-stream-connections" class="md-nav__link">TCP stream connections</a>
        </li>
        <li class="md-nav__item"><a href="#event-loop" class="md-nav__link">Event Loop</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="#core-functions" class="md-nav__link">Core functions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#additional-functions" class="md-nav__link">Additional functions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#class-task" class="md-nav__link">class Task</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#class-event" class="md-nav__link">class Event</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#class-threadsafeflag" class="md-nav__link">class ThreadSafeFlag</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#class-lock" class="md-nav__link">class Lock</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#tcp-stream-connections" class="md-nav__link">TCP stream connections</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#event-loop" class="md-nav__link">Event Loop</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="zlib.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">zlib</span></code> – zlib decompression</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="_thread.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">_thread</span></code> – multithreading support</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html#micropython-specific-libraries" class="md-nav__link">MicroPython 的特定库</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html#port-specific-libraries" class="md-nav__link">适配端的特定库</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html#extending-built-in-libraries-from-python" class="md-nav__link">扩展 Python 内置库</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../reference/index.html" class="md-nav__link">MicroPython 语言与实现</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../genrst/index.html" class="md-nav__link">MicroPython differences from CPython</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop/index.html" class="md-nav__link">MicroPython Internals</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../license.html" class="md-nav__link">MicroPython 开源协议信息</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../pyboard/quickref.html" class="md-nav__link">Quick reference for the pyboard</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../esp8266/quickref.html" class="md-nav__link">Quick reference for the ESP8266</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../esp32/quickref.html" class="md-nav__link">Quick reference for the ESP32</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../rp2/quickref.html" class="md-nav__link">Quick reference for the RP2</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../wipy/quickref.html" class="md-nav__link">Quick reference for the WiPy</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../unix/quickref.html" class="md-nav__link">Quick reference for the UNIX and Windows ports</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../zephyr/quickref.html" class="md-nav__link">Zephyr 适配的快速参考</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#library-uasyncio--page-root" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">uasyncio</span></code> — asynchronous I/O scheduler</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#core-functions" class="md-nav__link">Core functions</a>
        </li>
        <li class="md-nav__item"><a href="#additional-functions" class="md-nav__link">Additional functions</a>
        </li>
        <li class="md-nav__item"><a href="#class-task" class="md-nav__link">class Task</a>
        </li>
        <li class="md-nav__item"><a href="#class-event" class="md-nav__link">class Event</a>
        </li>
        <li class="md-nav__item"><a href="#class-threadsafeflag" class="md-nav__link">class ThreadSafeFlag</a>
        </li>
        <li class="md-nav__item"><a href="#class-lock" class="md-nav__link">class Lock</a>
        </li>
        <li class="md-nav__item"><a href="#tcp-stream-connections" class="md-nav__link">TCP stream connections</a>
        </li>
        <li class="md-nav__item"><a href="#event-loop" class="md-nav__link">Event Loop</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="module-uasyncio">
<span id="uasyncio-asynchronous-i-o-scheduler"></span><h1 id="library-uasyncio--page-root"><a class="reference internal" href="#library-uasyncio--page-root" title="uasyncio: asynchronous I/O scheduler for writing concurrent code"><code class="xref py py-mod docutils literal notranslate"><span class="pre">uasyncio</span></code></a> — asynchronous I/O scheduler<a class="headerlink" href="#library-uasyncio--page-root" title="永久链接至标题">¶</a></h1>
<p><em>This module implements a subset of the corresponding</em> <a class="reference internal" href="../reference/glossary.html#term-CPython"><span class="xref std std-term">CPython</span></a> <em>module,
as described below. For more information, refer to the original
CPython documentation:</em>
<a class="reference external" href="https://docs.python.org/3.8/library/asyncio.html">asyncio</a></p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">uasyncio</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">blink</span><span class="p">(</span><span class="n">led</span><span class="p">,</span> <span class="n">period_ms</span><span class="p">):</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">led</span><span class="o">.</span><span class="n">on</span><span class="p">()</span>
        <span class="k">await</span> <span class="n">uasyncio</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">led</span><span class="o">.</span><span class="n">off</span><span class="p">()</span>
        <span class="k">await</span> <span class="n">uasyncio</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="n">period_ms</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">led1</span><span class="p">,</span> <span class="n">led2</span><span class="p">):</span>
    <span class="n">uasyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">blink</span><span class="p">(</span><span class="n">led1</span><span class="p">,</span> <span class="mi">700</span><span class="p">))</span>
    <span class="n">uasyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">blink</span><span class="p">(</span><span class="n">led2</span><span class="p">,</span> <span class="mi">400</span><span class="p">))</span>
    <span class="k">await</span> <span class="n">uasyncio</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">10_000</span><span class="p">)</span>

<span class="c1"># Running on a pyboard</span>
<span class="kn">from</span> <span class="nn">pyb</span> <span class="k">import</span> <span class="n">LED</span>
<span class="n">uasyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">(</span><span class="n">LED</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">LED</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span>

<span class="c1"># Running on a generic board</span>
<span class="kn">from</span> <span class="nn">machine</span> <span class="k">import</span> <span class="n">Pin</span>
<span class="n">uasyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">Pin</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span>
</pre></div>
</div>
<section id="core-functions">
<h2 id="core-functions">Core functions<a class="headerlink" href="#core-functions" title="永久链接至标题">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="uasyncio.create_task">
<span class="sig-prename descclassname"><span class="pre">uasyncio.</span></span><span class="sig-name descname"><span class="pre">create_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">coro</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.create_task" title="永久链接至目标">¶</a></dt>
<dd><p>Create a new task from the given coroutine and schedule it to run.</p>
<p>Returns the corresponding <a class="reference internal" href="#uasyncio.Task" title="uasyncio.Task"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Task</span></code></a> object.</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="uasyncio.current_task">
<span class="sig-prename descclassname"><span class="pre">uasyncio.</span></span><span class="sig-name descname"><span class="pre">current_task</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.current_task" title="永久链接至目标">¶</a></dt>
<dd><p>Return the <a class="reference internal" href="#uasyncio.Task" title="uasyncio.Task"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Task</span></code></a> object associated with the currently running task.</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="uasyncio.run">
<span class="sig-prename descclassname"><span class="pre">uasyncio.</span></span><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">coro</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.run" title="永久链接至目标">¶</a></dt>
<dd><p>Create a new task from the given coroutine and run it until it completes.</p>
<p>Returns the value returned by <em>coro</em>.</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="uasyncio.sleep">
<span class="sig-prename descclassname"><span class="pre">uasyncio.</span></span><span class="sig-name descname"><span class="pre">sleep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.sleep" title="永久链接至目标">¶</a></dt>
<dd><p>Sleep for <em>t</em> seconds (can be a float).</p>
<p>This is a coroutine.</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="uasyncio.sleep_ms">
<span class="sig-prename descclassname"><span class="pre">uasyncio.</span></span><span class="sig-name descname"><span class="pre">sleep_ms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.sleep_ms" title="永久链接至目标">¶</a></dt>
<dd><p>Sleep for <em>t</em> milliseconds.</p>
<p>This is a coroutine, and a MicroPython extension.</p>
</dd></dl>
</section>
<section id="additional-functions">
<h2 id="additional-functions">Additional functions<a class="headerlink" href="#additional-functions" title="永久链接至标题">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="uasyncio.wait_for">
<span class="sig-prename descclassname"><span class="pre">uasyncio.</span></span><span class="sig-name descname"><span class="pre">wait_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">awaitable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.wait_for" title="永久链接至目标">¶</a></dt>
<dd><p>Wait for the <em>awaitable</em> to complete, but cancel it if it takes longer
than <em>timeout</em> seconds.  If <em>awaitable</em> is not a task then a task will be
created from it.</p>
<p>If a timeout occurs, it cancels the task and raises <code class="docutils literal notranslate"><span class="pre">asyncio.TimeoutError</span></code>:
this should be trapped by the caller.  The task receives
<code class="docutils literal notranslate"><span class="pre">asyncio.CancelledError</span></code> which may be ignored or trapped using <code class="docutils literal notranslate"><span class="pre">try...except</span></code>
or <code class="docutils literal notranslate"><span class="pre">try...finally</span></code> to run cleanup code.</p>
<p>Returns the return value of <em>awaitable</em>.</p>
<p>This is a coroutine.</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="uasyncio.wait_for_ms">
<span class="sig-prename descclassname"><span class="pre">uasyncio.</span></span><span class="sig-name descname"><span class="pre">wait_for_ms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">awaitable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.wait_for_ms" title="永久链接至目标">¶</a></dt>
<dd><p>Similar to <a class="reference internal" href="#uasyncio.wait_for" title="uasyncio.wait_for"><code class="xref any py py-func docutils literal notranslate"><span class="pre">wait_for</span></code></a> but <em>timeout</em> is an integer in milliseconds.</p>
<p>This is a coroutine, and a MicroPython extension.</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="uasyncio.gather">
<span class="sig-prename descclassname"><span class="pre">uasyncio.</span></span><span class="sig-name descname"><span class="pre">gather</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">awaitables</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_exceptions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.gather" title="永久链接至目标">¶</a></dt>
<dd><p>Run all <em>awaitables</em> concurrently.  Any <em>awaitables</em> that are not tasks are
promoted to tasks.</p>
<p>Returns a list of return values of all <em>awaitables</em>.</p>
<p>This is a coroutine.</p>
</dd></dl>
</section>
<section id="class-task">
<h2 id="class-task">class Task<a class="headerlink" href="#class-task" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="uasyncio.Task">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">uasyncio.</span></span><span class="sig-name descname"><span class="pre">Task</span></span><a class="headerlink" href="#uasyncio.Task" title="永久链接至目标">¶</a></dt>
<dd><p>This object wraps a coroutine into a running task.  Tasks can be waited on
using <code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">task</span></code>, which will wait for the task to complete and return
the return value of the task.</p>
<p>Tasks should not be created directly, rather use <a class="reference internal" href="#uasyncio.create_task" title="uasyncio.create_task"><code class="xref any py py-func docutils literal notranslate"><span class="pre">create_task</span></code></a> to create them.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Task.cancel">
<span class="sig-prename descclassname"><span class="pre">Task.</span></span><span class="sig-name descname"><span class="pre">cancel</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Task.cancel" title="永久链接至目标">¶</a></dt>
<dd><p>Cancel the task by injecting <code class="docutils literal notranslate"><span class="pre">asyncio.CancelledError</span></code> into it.  The task may
ignore this exception.  Cleanup code may be run by trapping it, or via
<code class="docutils literal notranslate"><span class="pre">try</span> <span class="pre">...</span> <span class="pre">finally</span></code>.</p>
</dd></dl>
</section>
<section id="class-event">
<h2 id="class-event">class Event<a class="headerlink" href="#class-event" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="uasyncio.Event">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">uasyncio.</span></span><span class="sig-name descname"><span class="pre">Event</span></span><a class="headerlink" href="#uasyncio.Event" title="永久链接至目标">¶</a></dt>
<dd><p>Create a new event which can be used to synchronise tasks.  Events start
in the cleared state.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Event.is_set">
<span class="sig-prename descclassname"><span class="pre">Event.</span></span><span class="sig-name descname"><span class="pre">is_set</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Event.is_set" title="永久链接至目标">¶</a></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the event is set, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Event.set">
<span class="sig-prename descclassname"><span class="pre">Event.</span></span><span class="sig-name descname"><span class="pre">set</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Event.set" title="永久链接至目标">¶</a></dt>
<dd><p>Set the event.  Any tasks waiting on the event will be scheduled to run.</p>
<p>Note: This must be called from within a task. It is not safe to call this
from an IRQ, scheduler callback, or other thread. See <a class="reference internal" href="#uasyncio.ThreadSafeFlag" title="uasyncio.ThreadSafeFlag"><code class="xref any py py-class docutils literal notranslate"><span class="pre">ThreadSafeFlag</span></code></a>.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Event.clear">
<span class="sig-prename descclassname"><span class="pre">Event.</span></span><span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Event.clear" title="永久链接至目标">¶</a></dt>
<dd><p>Clear the event.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Event.wait">
<span class="sig-prename descclassname"><span class="pre">Event.</span></span><span class="sig-name descname"><span class="pre">wait</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Event.wait" title="永久链接至目标">¶</a></dt>
<dd><p>Wait for the event to be set.  If the event is already set then it returns
immediately.</p>
<p>This is a coroutine.</p>
</dd></dl>
</section>
<section id="class-threadsafeflag">
<h2 id="class-threadsafeflag">class ThreadSafeFlag<a class="headerlink" href="#class-threadsafeflag" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="uasyncio.ThreadSafeFlag">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">uasyncio.</span></span><span class="sig-name descname"><span class="pre">ThreadSafeFlag</span></span><a class="headerlink" href="#uasyncio.ThreadSafeFlag" title="永久链接至目标">¶</a></dt>
<dd><p>Create a new flag which can be used to synchronise a task with code running
outside the asyncio loop, such as other threads, IRQs, or scheduler
callbacks.  Flags start in the cleared state.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.ThreadSafeFlag.set">
<span class="sig-prename descclassname"><span class="pre">ThreadSafeFlag.</span></span><span class="sig-name descname"><span class="pre">set</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.ThreadSafeFlag.set" title="永久链接至目标">¶</a></dt>
<dd><p>Set the flag.  If there is a task waiting on the event, it will be scheduled
to run.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.ThreadSafeFlag.wait">
<span class="sig-prename descclassname"><span class="pre">ThreadSafeFlag.</span></span><span class="sig-name descname"><span class="pre">wait</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.ThreadSafeFlag.wait" title="永久链接至目标">¶</a></dt>
<dd><p>Wait for the flag to be set.  If the flag is already set then it returns
immediately.</p>
<p>A flag may only be waited on by a single task at a time.</p>
<p>This is a coroutine.</p>
</dd></dl>
</section>
<section id="class-lock">
<h2 id="class-lock">class Lock<a class="headerlink" href="#class-lock" title="永久链接至标题">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="uasyncio.Lock">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">uasyncio.</span></span><span class="sig-name descname"><span class="pre">Lock</span></span><a class="headerlink" href="#uasyncio.Lock" title="永久链接至目标">¶</a></dt>
<dd><p>Create a new lock which can be used to coordinate tasks.  Locks start in
the unlocked state.</p>
<p>In addition to the methods below, locks can be used in an <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code> statement.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Lock.locked">
<span class="sig-prename descclassname"><span class="pre">Lock.</span></span><span class="sig-name descname"><span class="pre">locked</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Lock.locked" title="永久链接至目标">¶</a></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the lock is locked, otherwise <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Lock.acquire">
<span class="sig-prename descclassname"><span class="pre">Lock.</span></span><span class="sig-name descname"><span class="pre">acquire</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Lock.acquire" title="永久链接至目标">¶</a></dt>
<dd><p>Wait for the lock to be in the unlocked state and then lock it in an atomic
way.  Only one task can acquire the lock at any one time.</p>
<p>This is a coroutine.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Lock.release">
<span class="sig-prename descclassname"><span class="pre">Lock.</span></span><span class="sig-name descname"><span class="pre">release</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Lock.release" title="永久链接至目标">¶</a></dt>
<dd><p>Release the lock.  If any tasks are waiting on the lock then the next one in the
queue is scheduled to run and the lock remains locked.  Otherwise, no tasks are
waiting an the lock becomes unlocked.</p>
</dd></dl>
</section>
<section id="tcp-stream-connections">
<h2 id="tcp-stream-connections">TCP stream connections<a class="headerlink" href="#tcp-stream-connections" title="永久链接至标题">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="uasyncio.open_connection">
<span class="sig-prename descclassname"><span class="pre">uasyncio.</span></span><span class="sig-name descname"><span class="pre">open_connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.open_connection" title="永久链接至目标">¶</a></dt>
<dd><p>Open a TCP connection to the given <em>host</em> and <em>port</em>.  The <em>host</em> address will be
resolved using <a class="reference internal" href="socket.html#socket.getaddrinfo" title="socket.getaddrinfo"><code class="xref any py py-func docutils literal notranslate"><span class="pre">socket.getaddrinfo</span></code></a>, which is currently a blocking call.</p>
<p>Returns a pair of streams: a reader and a writer stream.
Will raise a socket-specific <code class="docutils literal notranslate"><span class="pre">OSError</span></code> if the host could not be resolved or if
the connection could not be made.</p>
<p>This is a coroutine.</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="uasyncio.start_server">
<span class="sig-prename descclassname"><span class="pre">uasyncio.</span></span><span class="sig-name descname"><span class="pre">start_server</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backlog</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.start_server" title="永久链接至目标">¶</a></dt>
<dd><p>Start a TCP server on the given <em>host</em> and <em>port</em>.  The <em>callback</em> will be
called with incoming, accepted connections, and be passed 2 arguments: reader
and writer streams for the connection.</p>
<p>Returns a <a class="reference internal" href="#uasyncio.Server" title="uasyncio.Server"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Server</span></code></a> object.</p>
<p>This is a coroutine.</p>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="uasyncio.Stream">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">uasyncio.</span></span><span class="sig-name descname"><span class="pre">Stream</span></span><a class="headerlink" href="#uasyncio.Stream" title="永久链接至目标">¶</a></dt>
<dd><p>This represents a TCP stream connection.  To minimise code this class implements
both a reader and a writer, and both <code class="docutils literal notranslate"><span class="pre">StreamReader</span></code> and <code class="docutils literal notranslate"><span class="pre">StreamWriter</span></code> alias to
this class.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Stream.get_extra_info">
<span class="sig-prename descclassname"><span class="pre">Stream.</span></span><span class="sig-name descname"><span class="pre">get_extra_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Stream.get_extra_info" title="永久链接至目标">¶</a></dt>
<dd><p>Get extra information about the stream, given by <em>v</em>.  The valid values for <em>v</em> are:
<code class="docutils literal notranslate"><span class="pre">peername</span></code>.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Stream.close">
<span class="sig-prename descclassname"><span class="pre">Stream.</span></span><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Stream.close" title="永久链接至目标">¶</a></dt>
<dd><p>Close the stream.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Stream.wait_closed">
<span class="sig-prename descclassname"><span class="pre">Stream.</span></span><span class="sig-name descname"><span class="pre">wait_closed</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Stream.wait_closed" title="永久链接至目标">¶</a></dt>
<dd><p>Wait for the stream to close.</p>
<p>This is a coroutine.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Stream.read">
<span class="sig-prename descclassname"><span class="pre">Stream.</span></span><span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Stream.read" title="永久链接至目标">¶</a></dt>
<dd><p>Read up to <em>n</em> bytes and return them.</p>
<p>This is a coroutine.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Stream.readinto">
<span class="sig-prename descclassname"><span class="pre">Stream.</span></span><span class="sig-name descname"><span class="pre">readinto</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Stream.readinto" title="永久链接至目标">¶</a></dt>
<dd><p>Read up to n bytes into <em>buf</em> with n being equal to the length of <em>buf</em>.</p>
<p>Return the number of bytes read into <em>buf</em>.</p>
<p>This is a coroutine, and a MicroPython extension.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Stream.readexactly">
<span class="sig-prename descclassname"><span class="pre">Stream.</span></span><span class="sig-name descname"><span class="pre">readexactly</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Stream.readexactly" title="永久链接至目标">¶</a></dt>
<dd><p>Read exactly <em>n</em> bytes and return them as a bytes object.</p>
<p>Raises an <code class="docutils literal notranslate"><span class="pre">EOFError</span></code> exception if the stream ends before reading <em>n</em> bytes.</p>
<p>This is a coroutine.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Stream.readline">
<span class="sig-prename descclassname"><span class="pre">Stream.</span></span><span class="sig-name descname"><span class="pre">readline</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Stream.readline" title="永久链接至目标">¶</a></dt>
<dd><p>Read a line and return it.</p>
<p>This is a coroutine.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Stream.write">
<span class="sig-prename descclassname"><span class="pre">Stream.</span></span><span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Stream.write" title="永久链接至目标">¶</a></dt>
<dd><p>Accumulated <em>buf</em> to the output buffer.  The data is only flushed when
<a class="reference internal" href="#uasyncio.Stream.drain" title="uasyncio.Stream.drain"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">Stream.drain</span></code></a> is called.  It is recommended to call <a class="reference internal" href="#uasyncio.Stream.drain" title="uasyncio.Stream.drain"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">Stream.drain</span></code></a> immediately
after calling this function.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Stream.drain">
<span class="sig-prename descclassname"><span class="pre">Stream.</span></span><span class="sig-name descname"><span class="pre">drain</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Stream.drain" title="永久链接至目标">¶</a></dt>
<dd><p>Drain (write) all buffered output data out to the stream.</p>
<p>This is a coroutine.</p>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="uasyncio.Server">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">uasyncio.</span></span><span class="sig-name descname"><span class="pre">Server</span></span><a class="headerlink" href="#uasyncio.Server" title="永久链接至目标">¶</a></dt>
<dd><p>This represents the server class returned from <a class="reference internal" href="#uasyncio.start_server" title="uasyncio.start_server"><code class="xref any py py-func docutils literal notranslate"><span class="pre">start_server</span></code></a>.  It can be used
in an <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code> statement to close the server upon exit.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Server.close">
<span class="sig-prename descclassname"><span class="pre">Server.</span></span><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Server.close" title="永久链接至目标">¶</a></dt>
<dd><p>Close the server.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Server.wait_closed">
<span class="sig-prename descclassname"><span class="pre">Server.</span></span><span class="sig-name descname"><span class="pre">wait_closed</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Server.wait_closed" title="永久链接至目标">¶</a></dt>
<dd><p>Wait for the server to close.</p>
<p>This is a coroutine.</p>
</dd></dl>
</section>
<section id="event-loop">
<h2 id="event-loop">Event Loop<a class="headerlink" href="#event-loop" title="永久链接至标题">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="uasyncio.get_event_loop">
<span class="sig-prename descclassname"><span class="pre">uasyncio.</span></span><span class="sig-name descname"><span class="pre">get_event_loop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.get_event_loop" title="永久链接至目标">¶</a></dt>
<dd><p>Return the event loop used to schedule and run tasks.  See <a class="reference internal" href="#uasyncio.Loop" title="uasyncio.Loop"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Loop</span></code></a>.</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="uasyncio.new_event_loop">
<span class="sig-prename descclassname"><span class="pre">uasyncio.</span></span><span class="sig-name descname"><span class="pre">new_event_loop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.new_event_loop" title="永久链接至目标">¶</a></dt>
<dd><p>Reset the event loop and return it.</p>
<p>Note: since MicroPython only has a single event loop this function just
resets the loop’s state, it does not create a new one.</p>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="uasyncio.Loop">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">uasyncio.</span></span><span class="sig-name descname"><span class="pre">Loop</span></span><a class="headerlink" href="#uasyncio.Loop" title="永久链接至目标">¶</a></dt>
<dd><p>This represents the object which schedules and runs tasks.  It cannot be
created, use <a class="reference internal" href="#uasyncio.get_event_loop" title="uasyncio.get_event_loop"><code class="xref any py py-func docutils literal notranslate"><span class="pre">get_event_loop</span></code></a> instead.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Loop.create_task">
<span class="sig-prename descclassname"><span class="pre">Loop.</span></span><span class="sig-name descname"><span class="pre">create_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">coro</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Loop.create_task" title="永久链接至目标">¶</a></dt>
<dd><p>Create a task from the given <em>coro</em> and return the new <a class="reference internal" href="#uasyncio.Task" title="uasyncio.Task"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Task</span></code></a> object.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Loop.run_forever">
<span class="sig-prename descclassname"><span class="pre">Loop.</span></span><span class="sig-name descname"><span class="pre">run_forever</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Loop.run_forever" title="永久链接至目标">¶</a></dt>
<dd><p>Run the event loop until <a class="reference internal" href="#uasyncio.Loop.stop" title="uasyncio.Loop.stop"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">stop()</span></code></a> is called.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Loop.run_until_complete">
<span class="sig-prename descclassname"><span class="pre">Loop.</span></span><span class="sig-name descname"><span class="pre">run_until_complete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">awaitable</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Loop.run_until_complete" title="永久链接至目标">¶</a></dt>
<dd><p>Run the given <em>awaitable</em> until it completes.  If <em>awaitable</em> is not a task
then it will be promoted to one.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Loop.stop">
<span class="sig-prename descclassname"><span class="pre">Loop.</span></span><span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Loop.stop" title="永久链接至目标">¶</a></dt>
<dd><p>Stop the event loop.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Loop.close">
<span class="sig-prename descclassname"><span class="pre">Loop.</span></span><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Loop.close" title="永久链接至目标">¶</a></dt>
<dd><p>Close the event loop.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Loop.set_exception_handler">
<span class="sig-prename descclassname"><span class="pre">Loop.</span></span><span class="sig-name descname"><span class="pre">set_exception_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handler</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Loop.set_exception_handler" title="永久链接至目标">¶</a></dt>
<dd><p>Set the exception handler to call when a Task raises an exception that is not
caught.  The <em>handler</em> should accept two arguments: <code class="docutils literal notranslate"><span class="pre">(loop,</span> <span class="pre">context)</span></code>.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Loop.get_exception_handler">
<span class="sig-prename descclassname"><span class="pre">Loop.</span></span><span class="sig-name descname"><span class="pre">get_exception_handler</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Loop.get_exception_handler" title="永久链接至目标">¶</a></dt>
<dd><p>Get the current exception handler.  Returns the handler, or <code class="docutils literal notranslate"><span class="pre">None</span></code> if no
custom handler is set.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Loop.default_exception_handler">
<span class="sig-prename descclassname"><span class="pre">Loop.</span></span><span class="sig-name descname"><span class="pre">default_exception_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Loop.default_exception_handler" title="永久链接至目标">¶</a></dt>
<dd><p>The default exception handler that is called.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="uasyncio.Loop.call_exception_handler">
<span class="sig-prename descclassname"><span class="pre">Loop.</span></span><span class="sig-name descname"><span class="pre">call_exception_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uasyncio.Loop.call_exception_handler" title="永久链接至目标">¶</a></dt>
<dd><p>Call the current exception handler.  The argument <em>context</em> is passed through and
is a dictionary containing keys: <code class="docutils literal notranslate"><span class="pre">'message'</span></code>, <code class="docutils literal notranslate"><span class="pre">'exception'</span></code>, <code class="docutils literal notranslate"><span class="pre">'future'</span></code>.</p>
</dd></dl>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="time.html" title="time – time related functions"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> <code class="xref py py-mod docutils literal notranslate"><span class="pre">time</span></code> – time related functions </span>
              </div>
            </a>
          
          
            <a href="zlib.html" title="zlib – zlib decompression"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> <code class="xref py py-mod docutils literal notranslate"><span class="pre">zlib</span></code> – zlib decompression </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright - The MicroPython Documentation is Copyright © 2014-2022, Damien P. George, Paul Sokolovsky, and contributors.
              
          </div>
            Last updated on
              18 4月 2022.
            <br/>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>