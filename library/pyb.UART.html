
<!DOCTYPE html>

<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>class UART – duplex serial communication bus &#8212; MicroPython 1.18 文档</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="class USB_HID – USB Human Interface Device (HID)" href="pyb.USB_HID.html" />
    <link rel="prev" title="class Timer – control internal timers" href="pyb.Timer.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=blue data-md-color-accent=light-blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#library/pyb.UART" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="MicroPython 1.18 文档"
           class="md-header-nav__button md-logo">
          
            &nbsp;
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">MicroPython 1.18 文档</span>
          <span class="md-header-nav__topic"> class UART – duplex serial communication bus </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
      
  
  <script src="../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../"versions.json"",
        target_loc = "../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">MicroPython 1.18 文档</a></li>
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">MicroPython 库</a></li>
          <li class="md-tabs__item"><a href="pyb.html" class="md-tabs__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyb</span></code> — functions related to the board</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="MicroPython 1.18 文档" class="md-nav__button md-logo">
      
        <img src="../_static/" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="MicroPython 1.18 文档">MicroPython 1.18 文档</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="index.html" class="md-nav__link">MicroPython 库</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="index.html#python-standard-libraries-and-micro-libraries" class="md-nav__link">Python 标准库和微型库</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html#micropython-specific-libraries" class="md-nav__link">MicroPython 的特定库</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html#port-specific-libraries" class="md-nav__link">适配端的特定库</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="index.html#libraries-specific-to-the-pyboard" class="md-nav__link">pyboard 的特定库</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="pyb.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyb</span></code> — functions related to the board</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="stm.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">stm</span></code> — functionality specific to STM32 MCUs</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="lcd160cr.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lcd160cr</span></code> — control of LCD160CR display</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html#libraries-specific-to-the-wipy" class="md-nav__link">WiPy 的特定库</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html#libraries-specific-to-the-esp8266-and-esp32" class="md-nav__link">ESP8266 和 ESP32 的特定库</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html#libraries-specific-to-the-rp2040" class="md-nav__link">RP2040 的特定库</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html#libraries-specific-to-zephyr" class="md-nav__link">Zephyr 的特定库</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html#extending-built-in-libraries-from-python" class="md-nav__link">扩展 Python 内置库</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../reference/index.html" class="md-nav__link">MicroPython 语言与实现</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../genrst/index.html" class="md-nav__link">MicroPython differences from CPython</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop/index.html" class="md-nav__link">MicroPython Internals</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../license.html" class="md-nav__link">MicroPython 开源协议信息</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../pyboard/quickref.html" class="md-nav__link">Quick reference for the pyboard</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../esp8266/quickref.html" class="md-nav__link">Quick reference for the ESP8266</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../esp32/quickref.html" class="md-nav__link">Quick reference for the ESP32</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../rp2/quickref.html" class="md-nav__link">Quick reference for the RP2</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../wipy/quickref.html" class="md-nav__link">Quick reference for the WiPy</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../unix/quickref.html" class="md-nav__link">Quick reference for the UNIX and Windows ports</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../zephyr/quickref.html" class="md-nav__link">Zephyr 适配的快速参考</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#library-pyb-uart--page-root" class="md-nav__link">class UART – duplex serial communication bus</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#constructors" class="md-nav__link">Constructors</a>
        </li>
        <li class="md-nav__item"><a href="#methods" class="md-nav__link">Methods</a>
        </li>
        <li class="md-nav__item"><a href="#constants" class="md-nav__link">Constants</a>
        </li>
        <li class="md-nav__item"><a href="#flow-control" class="md-nav__link">Flow Control</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#cts-target-controls-pyboard-transmitter" class="md-nav__link">CTS: target controls Pyboard transmitter</a>
        </li>
        <li class="md-nav__item"><a href="#rts-pyboard-controls-target-s-transmitter" class="md-nav__link">RTS: Pyboard controls target’s transmitter</a>
        </li></ul>
            </nav>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="class-uart-duplex-serial-communication-bus">
<span id="pyb-uart"></span><h1 id="library-pyb-uart--page-root">class UART – duplex serial communication bus<a class="headerlink" href="#library-pyb-uart--page-root" title="Permalink to this heading">¶</a></h1>
<p>UART implements the standard UART/USART duplex serial communications protocol.  At
the physical level it consists of 2 lines: RX and TX.  The unit of communication
is a character (not to be confused with a string character) which can be 8 or 9
bits wide.</p>
<p>UART objects can be created and initialised using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyb</span> <span class="k">import</span> <span class="n">UART</span>

<span class="n">uart</span> <span class="o">=</span> <span class="n">UART</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9600</span><span class="p">)</span>                         <span class="c1"># init with given baudrate</span>
<span class="n">uart</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="mi">9600</span><span class="p">,</span> <span class="n">bits</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">parity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># init with given parameters</span>
</pre></div>
</div>
<p>Bits can be 7, 8 or 9.  Parity can be None, 0 (even) or 1 (odd).  Stop can be 1 or 2.</p>
<p><em>Note:</em> with parity=None, only 8 and 9 bits are supported.  With parity enabled,
only 7 and 8 bits are supported.</p>
<p>A UART object acts like a <a class="reference internal" href="../reference/glossary.html#term-stream"><code class="xref any std std-term docutils literal notranslate"><span class="pre">stream</span></code></a> object and reading and writing is done
using the standard stream methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uart</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>       <span class="c1"># read 10 characters, returns a bytes object</span>
<span class="n">uart</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>         <span class="c1"># read all available characters</span>
<span class="n">uart</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>     <span class="c1"># read a line</span>
<span class="n">uart</span><span class="o">.</span><span class="n">readinto</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>  <span class="c1"># read and store into the given buffer</span>
<span class="n">uart</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">'abc'</span><span class="p">)</span>   <span class="c1"># write the 3 characters</span>
</pre></div>
</div>
<p>Individual characters can be read/written using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uart</span><span class="o">.</span><span class="n">readchar</span><span class="p">()</span>     <span class="c1"># read 1 character and returns it as an integer</span>
<span class="n">uart</span><span class="o">.</span><span class="n">writechar</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>  <span class="c1"># write 1 character</span>
</pre></div>
</div>
<p>To check if there is anything to be read, use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uart</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>          <span class="c1"># returns the number of characters waiting</span>
</pre></div>
</div>
<p><em>Note:</em> The stream functions <code class="docutils literal notranslate"><span class="pre">read</span></code>, <code class="docutils literal notranslate"><span class="pre">write</span></code>, etc. are new in MicroPython v1.3.4.
Earlier versions use <code class="docutils literal notranslate"><span class="pre">uart.send</span></code> and <code class="docutils literal notranslate"><span class="pre">uart.recv</span></code>.</p>
<section id="constructors">
<h2 id="constructors">Constructors<a class="headerlink" href="#constructors" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pyb.pyb.UART">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pyb.</span></span><span class="sig-name descname"><span class="pre">UART</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bus</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">...</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyb.pyb.UART" title="永久链接至目标">¶</a></dt>
<dd><p>Construct a UART object on the given bus.
For Pyboard <code class="docutils literal notranslate"><span class="pre">bus</span></code> can be 1-4, 6, ‘XA’, ‘XB’, ‘YA’, or ‘YB’.
For Pyboard Lite <code class="docutils literal notranslate"><span class="pre">bus</span></code> can be 1, 2, 6, ‘XB’, or ‘YA’.
For Pyboard D <code class="docutils literal notranslate"><span class="pre">bus</span></code> can be 1-4, ‘XA’, ‘YA’ or ‘YB’.
With no additional parameters, the UART object is created but not
initialised (it has the settings from the last initialisation of
the bus, if any).  If extra arguments are given, the bus is initialised.
See <code class="docutils literal notranslate"><span class="pre">init</span></code> for parameters of initialisation.</p>
<p>The physical pins of the UART buses on Pyboard are:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">UART(4)</span></code> is on <code class="docutils literal notranslate"><span class="pre">XA</span></code>: <code class="docutils literal notranslate"><span class="pre">(TX,</span> <span class="pre">RX)</span> <span class="pre">=</span> <span class="pre">(X1,</span> <span class="pre">X2)</span> <span class="pre">=</span> <span class="pre">(PA0,</span> <span class="pre">PA1)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UART(1)</span></code> is on <code class="docutils literal notranslate"><span class="pre">XB</span></code>: <code class="docutils literal notranslate"><span class="pre">(TX,</span> <span class="pre">RX)</span> <span class="pre">=</span> <span class="pre">(X9,</span> <span class="pre">X10)</span> <span class="pre">=</span> <span class="pre">(PB6,</span> <span class="pre">PB7)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UART(6)</span></code> is on <code class="docutils literal notranslate"><span class="pre">YA</span></code>: <code class="docutils literal notranslate"><span class="pre">(TX,</span> <span class="pre">RX)</span> <span class="pre">=</span> <span class="pre">(Y1,</span> <span class="pre">Y2)</span> <span class="pre">=</span> <span class="pre">(PC6,</span> <span class="pre">PC7)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UART(3)</span></code> is on <code class="docutils literal notranslate"><span class="pre">YB</span></code>: <code class="docutils literal notranslate"><span class="pre">(TX,</span> <span class="pre">RX)</span> <span class="pre">=</span> <span class="pre">(Y9,</span> <span class="pre">Y10)</span> <span class="pre">=</span> <span class="pre">(PB10,</span> <span class="pre">PB11)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UART(2)</span></code> is on: <code class="docutils literal notranslate"><span class="pre">(TX,</span> <span class="pre">RX)</span> <span class="pre">=</span> <span class="pre">(X3,</span> <span class="pre">X4)</span> <span class="pre">=</span> <span class="pre">(PA2,</span> <span class="pre">PA3)</span></code></p></li>
</ul>
</div></blockquote>
<p>The Pyboard Lite supports UART(1), UART(2) and UART(6) only, pins are:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">UART(1)</span></code> is on <code class="docutils literal notranslate"><span class="pre">XB</span></code>: <code class="docutils literal notranslate"><span class="pre">(TX,</span> <span class="pre">RX)</span> <span class="pre">=</span> <span class="pre">(X9,</span> <span class="pre">X10)</span> <span class="pre">=</span> <span class="pre">(PB6,</span> <span class="pre">PB7)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UART(6)</span></code> is on <code class="docutils literal notranslate"><span class="pre">YA</span></code>: <code class="docutils literal notranslate"><span class="pre">(TX,</span> <span class="pre">RX)</span> <span class="pre">=</span> <span class="pre">(Y1,</span> <span class="pre">Y2)</span> <span class="pre">=</span> <span class="pre">(PC6,</span> <span class="pre">PC7)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UART(2)</span></code> is on: <code class="docutils literal notranslate"><span class="pre">(TX,</span> <span class="pre">RX)</span> <span class="pre">=</span> <span class="pre">(X1,</span> <span class="pre">X2)</span> <span class="pre">=</span> <span class="pre">(PA2,</span> <span class="pre">PA3)</span></code></p></li>
</ul>
</div></blockquote>
<p>The Pyboard D supports UART(1), UART(2), UART(3) and UART(4) only, pins are:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">UART(4)</span></code> is on <code class="docutils literal notranslate"><span class="pre">XA</span></code>: <code class="docutils literal notranslate"><span class="pre">(TX,</span> <span class="pre">RX)</span> <span class="pre">=</span> <span class="pre">(X1,</span> <span class="pre">X2)</span> <span class="pre">=</span> <span class="pre">(PA0,</span> <span class="pre">PA1)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UART(1)</span></code> is on <code class="docutils literal notranslate"><span class="pre">YA</span></code>: <code class="docutils literal notranslate"><span class="pre">(TX,</span> <span class="pre">RX)</span> <span class="pre">=</span> <span class="pre">(Y1,</span> <span class="pre">Y2)</span> <span class="pre">=</span> <span class="pre">(PA9,</span> <span class="pre">PA10)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UART(3)</span></code> is on <code class="docutils literal notranslate"><span class="pre">YB</span></code>: <code class="docutils literal notranslate"><span class="pre">(TX,</span> <span class="pre">RX)</span> <span class="pre">=</span> <span class="pre">(Y9,</span> <span class="pre">Y10)</span> <span class="pre">=</span> <span class="pre">(PB10,</span> <span class="pre">PB11)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UART(2)</span></code> is on: <code class="docutils literal notranslate"><span class="pre">(TX,</span> <span class="pre">RX)</span> <span class="pre">=</span> <span class="pre">(X3,</span> <span class="pre">X4)</span> <span class="pre">=</span> <span class="pre">(PA2,</span> <span class="pre">PA3)</span></code></p></li>
</ul>
</div></blockquote>
<p><em>Note:</em> Pyboard D has <code class="docutils literal notranslate"><span class="pre">UART(1)</span></code> on <code class="docutils literal notranslate"><span class="pre">YA</span></code>, unlike Pyboard and Pyboard Lite that both
have <code class="docutils literal notranslate"><span class="pre">UART(1)</span></code> on <code class="docutils literal notranslate"><span class="pre">XB</span></code> and <code class="docutils literal notranslate"><span class="pre">UART(6)</span></code> on <code class="docutils literal notranslate"><span class="pre">YA</span></code>.</p>
</dd></dl>
</section>
<section id="methods">
<h2 id="methods">Methods<a class="headerlink" href="#methods" title="Permalink to this heading">¶</a></h2>
<dl class="py method">
<dt class="sig sig-object py" id="pyb.UART.init">
<span class="sig-prename descclassname"><span class="pre">UART.</span></span><span class="sig-name descname"><span class="pre">init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">baudrate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout_char</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_buf_len</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">64</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyb.UART.init" title="永久链接至目标">¶</a></dt>
<dd><p>Initialise the UART bus with the given parameters:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">baudrate</span></code> is the clock rate.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bits</span></code> is the number of bits per character, 7, 8 or 9.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parity</span></code> is the parity, <code class="docutils literal notranslate"><span class="pre">None</span></code>, 0 (even) or 1 (odd).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stop</span></code> is the number of stop bits, 1 or 2.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flow</span></code> sets the flow control type. Can be 0, <code class="docutils literal notranslate"><span class="pre">UART.RTS</span></code>, <code class="docutils literal notranslate"><span class="pre">UART.CTS</span></code>
or <code class="docutils literal notranslate"><span class="pre">UART.RTS</span> <span class="pre">|</span> <span class="pre">UART.CTS</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timeout</span></code> is the timeout in milliseconds to wait for writing/reading the first character.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timeout_char</span></code> is the timeout in milliseconds to wait between characters while writing or reading.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_buf_len</span></code> is the character length of the read buffer (0 to disable).</p></li>
</ul>
</div></blockquote>
<p>This method will raise an exception if the baudrate could not be set within
5% of the desired value.  The minimum baudrate is dictated by the frequency
of the bus that the UART is on; UART(1) and UART(6) are APB2, the rest are on
APB1.  The default bus frequencies give a minimum baudrate of 1300 for
UART(1) and UART(6) and 650 for the others.  Use <a class="reference internal" href="pyb.html#pyb.freq" title="pyb.freq"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyb.freq</span></code></a>
to reduce the bus frequencies to get lower baudrates.</p>
<p><em>Note:</em> with parity=None, only 8 and 9 bits are supported.  With parity enabled,
only 7 and 8 bits are supported.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="pyb.UART.deinit">
<span class="sig-prename descclassname"><span class="pre">UART.</span></span><span class="sig-name descname"><span class="pre">deinit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyb.UART.deinit" title="永久链接至目标">¶</a></dt>
<dd><p>Turn off the UART bus.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="pyb.UART.any">
<span class="sig-prename descclassname"><span class="pre">UART.</span></span><span class="sig-name descname"><span class="pre">any</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyb.UART.any" title="永久链接至目标">¶</a></dt>
<dd><p>Returns the number of bytes waiting (may be 0).</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="pyb.UART.read">
<span class="sig-prename descclassname"><span class="pre">UART.</span></span><span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">nbytes</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#pyb.UART.read" title="永久链接至目标">¶</a></dt>
<dd><p>Read characters.  If <code class="docutils literal notranslate"><span class="pre">nbytes</span></code> is specified then read at most that many bytes.
If <code class="docutils literal notranslate"><span class="pre">nbytes</span></code> are available in the buffer, returns immediately, otherwise returns
when sufficient characters arrive or the timeout elapses.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">nbytes</span></code> is not given then the method reads as much data as possible.  It
returns after the timeout has elapsed.</p>
<p><em>Note:</em> for 9 bit characters each character takes two bytes, <code class="docutils literal notranslate"><span class="pre">nbytes</span></code> must
be even, and the number of characters is <code class="docutils literal notranslate"><span class="pre">nbytes/2</span></code>.</p>
<p>Return value: a bytes object containing the bytes read in.  Returns <code class="docutils literal notranslate"><span class="pre">None</span></code>
on timeout.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="pyb.UART.readchar">
<span class="sig-prename descclassname"><span class="pre">UART.</span></span><span class="sig-name descname"><span class="pre">readchar</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyb.UART.readchar" title="永久链接至目标">¶</a></dt>
<dd><p>Receive a single character on the bus.</p>
<p>Return value: The character read, as an integer.  Returns -1 on timeout.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="pyb.UART.readinto">
<span class="sig-prename descclassname"><span class="pre">UART.</span></span><span class="sig-name descname"><span class="pre">readinto</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buf</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">nbytes</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#pyb.UART.readinto" title="永久链接至目标">¶</a></dt>
<dd><p>Read bytes into the <code class="docutils literal notranslate"><span class="pre">buf</span></code>.  If <code class="docutils literal notranslate"><span class="pre">nbytes</span></code> is specified then read at most
that many bytes.  Otherwise, read at most <code class="docutils literal notranslate"><span class="pre">len(buf)</span></code> bytes.</p>
<p>Return value: number of bytes read and stored into <code class="docutils literal notranslate"><span class="pre">buf</span></code> or <code class="docutils literal notranslate"><span class="pre">None</span></code> on
timeout.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="pyb.UART.readline">
<span class="sig-prename descclassname"><span class="pre">UART.</span></span><span class="sig-name descname"><span class="pre">readline</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyb.UART.readline" title="永久链接至目标">¶</a></dt>
<dd><p>Read a line, ending in a newline character. If such a line exists, return is
immediate. If the timeout elapses, all available data is returned regardless
of whether a newline exists.</p>
<p>Return value: the line read or <code class="docutils literal notranslate"><span class="pre">None</span></code> on timeout if no data is available.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="pyb.UART.write">
<span class="sig-prename descclassname"><span class="pre">UART.</span></span><span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyb.UART.write" title="永久链接至目标">¶</a></dt>
<dd><p>Write the buffer of bytes to the bus.  If characters are 7 or 8 bits wide
then each byte is one character.  If characters are 9 bits wide then two
bytes are used for each character (little endian), and <code class="docutils literal notranslate"><span class="pre">buf</span></code> must contain
an even number of bytes.</p>
<p>Return value: number of bytes written. If a timeout occurs and no bytes
were written returns <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="pyb.UART.writechar">
<span class="sig-prename descclassname"><span class="pre">UART.</span></span><span class="sig-name descname"><span class="pre">writechar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">char</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyb.UART.writechar" title="永久链接至目标">¶</a></dt>
<dd><p>Write a single character on the bus.  <code class="docutils literal notranslate"><span class="pre">char</span></code> is an integer to write.
Return value: <code class="docutils literal notranslate"><span class="pre">None</span></code>. See note below if CTS flow control is used.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="pyb.UART.sendbreak">
<span class="sig-prename descclassname"><span class="pre">UART.</span></span><span class="sig-name descname"><span class="pre">sendbreak</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyb.UART.sendbreak" title="永久链接至目标">¶</a></dt>
<dd><p>Send a break condition on the bus.  This drives the bus low for a duration
of 13 bits.
Return value: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>
</section>
<section id="constants">
<h2 id="constants">Constants<a class="headerlink" href="#constants" title="Permalink to this heading">¶</a></h2>
<dl class="py data">
<dt class="sig sig-object py" id="pyb.UART.RTS">
<span class="sig-prename descclassname"><span class="pre">UART.</span></span><span class="sig-name descname"><span class="pre">RTS</span></span><a class="headerlink" href="#pyb.UART.RTS" title="永久链接至目标">¶</a></dt>
<dt class="sig sig-object py" id="pyb.UART.CTS">
<span class="sig-prename descclassname"><span class="pre">UART.</span></span><span class="sig-name descname"><span class="pre">CTS</span></span><a class="headerlink" href="#pyb.UART.CTS" title="永久链接至目标">¶</a></dt>
<dd><p>to select the flow control type.</p>
</dd></dl>
</section>
<section id="flow-control">
<h2 id="flow-control">Flow Control<a class="headerlink" href="#flow-control" title="Permalink to this heading">¶</a></h2>
<p>On Pyboards V1 and V1.1 <code class="docutils literal notranslate"><span class="pre">UART(2)</span></code> and <code class="docutils literal notranslate"><span class="pre">UART(3)</span></code> support RTS/CTS hardware flow control
using the following pins:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">UART(2)</span></code> is on: <code class="docutils literal notranslate"><span class="pre">(TX,</span> <span class="pre">RX,</span> <span class="pre">nRTS,</span> <span class="pre">nCTS)</span> <span class="pre">=</span> <span class="pre">(X3,</span> <span class="pre">X4,</span> <span class="pre">X2,</span> <span class="pre">X1)</span> <span class="pre">=</span> <span class="pre">(PA2,</span> <span class="pre">PA3,</span> <span class="pre">PA1,</span> <span class="pre">PA0)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UART(3)</span></code> is on :<code class="docutils literal notranslate"><span class="pre">(TX,</span> <span class="pre">RX,</span> <span class="pre">nRTS,</span> <span class="pre">nCTS)</span> <span class="pre">=</span> <span class="pre">(Y9,</span> <span class="pre">Y10,</span> <span class="pre">Y7,</span> <span class="pre">Y6)</span> <span class="pre">=</span> <span class="pre">(PB10,</span> <span class="pre">PB11,</span> <span class="pre">PB14,</span> <span class="pre">PB13)</span></code></p></li>
</ul>
</div></blockquote>
<p>On the Pyboard Lite only <code class="docutils literal notranslate"><span class="pre">UART(2)</span></code> supports flow control on these pins:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">(TX,</span> <span class="pre">RX,</span> <span class="pre">nRTS,</span> <span class="pre">nCTS)</span> <span class="pre">=</span> <span class="pre">(X1,</span> <span class="pre">X2,</span> <span class="pre">X4,</span> <span class="pre">X3)</span> <span class="pre">=</span> <span class="pre">(PA2,</span> <span class="pre">PA3,</span> <span class="pre">PA1,</span> <span class="pre">PA0)</span></code></p>
</div></blockquote>
<p>In the following paragraphs the term “target” refers to the device connected to
the UART.</p>
<p>When the UART’s <code class="docutils literal notranslate"><span class="pre">init()</span></code> method is called with <code class="docutils literal notranslate"><span class="pre">flow</span></code> set to one or both of
<code class="docutils literal notranslate"><span class="pre">UART.RTS</span></code> and <code class="docutils literal notranslate"><span class="pre">UART.CTS</span></code> the relevant flow control pins are configured.
<code class="docutils literal notranslate"><span class="pre">nRTS</span></code> is an active low output, <code class="docutils literal notranslate"><span class="pre">nCTS</span></code> is an active low input with pullup
enabled. To achieve flow control the Pyboard’s <code class="docutils literal notranslate"><span class="pre">nCTS</span></code> signal should be connected
to the target’s <code class="docutils literal notranslate"><span class="pre">nRTS</span></code> and the Pyboard’s <code class="docutils literal notranslate"><span class="pre">nRTS</span></code> to the target’s <code class="docutils literal notranslate"><span class="pre">nCTS</span></code>.</p>
<section id="cts-target-controls-pyboard-transmitter">
<h3 id="cts-target-controls-pyboard-transmitter">CTS: target controls Pyboard transmitter<a class="headerlink" href="#cts-target-controls-pyboard-transmitter" title="Permalink to this heading">¶</a></h3>
<p>If CTS flow control is enabled the write behaviour is as follows:</p>
<p>If the Pyboard’s <code class="docutils literal notranslate"><span class="pre">UART.write(buf)</span></code> method is called, transmission will stall for
any periods when <code class="docutils literal notranslate"><span class="pre">nCTS</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code>. This will result in a timeout if the entire
buffer was not transmitted in the timeout period. The method returns the number of
bytes written, enabling the user to write the remainder of the data if required. In
the event of a timeout, a character will remain in the UART pending <code class="docutils literal notranslate"><span class="pre">nCTS</span></code>. The
number of bytes composing this character will be included in the return value.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">UART.writechar()</span></code> is called when <code class="docutils literal notranslate"><span class="pre">nCTS</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code> the method will time
out unless the target asserts <code class="docutils literal notranslate"><span class="pre">nCTS</span></code> in time. If it times out <code class="docutils literal notranslate"><span class="pre">OSError</span> <span class="pre">116</span></code>
will be raised. The character will be transmitted as soon as the target asserts <code class="docutils literal notranslate"><span class="pre">nCTS</span></code>.</p>
</section>
<section id="rts-pyboard-controls-target-s-transmitter">
<h3 id="rts-pyboard-controls-target-s-transmitter">RTS: Pyboard controls target’s transmitter<a class="headerlink" href="#rts-pyboard-controls-target-s-transmitter" title="Permalink to this heading">¶</a></h3>
<p>If RTS flow control is enabled, behaviour is as follows:</p>
<p>If buffered input is used (<code class="docutils literal notranslate"><span class="pre">read_buf_len</span></code> &gt; 0), incoming characters are buffered.
If the buffer becomes full, the next character to arrive will cause <code class="docutils literal notranslate"><span class="pre">nRTS</span></code> to go
<code class="docutils literal notranslate"><span class="pre">False</span></code>: the target should cease transmission. <code class="docutils literal notranslate"><span class="pre">nRTS</span></code> will go <code class="docutils literal notranslate"><span class="pre">True</span></code> when
characters are read from the buffer.</p>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">any()</span></code> method returns the number of bytes in the buffer. Assume a
buffer length of <code class="docutils literal notranslate"><span class="pre">N</span></code> bytes. If the buffer becomes full, and another character arrives,
<code class="docutils literal notranslate"><span class="pre">nRTS</span></code> will be set False, and <code class="docutils literal notranslate"><span class="pre">any()</span></code> will return the count <code class="docutils literal notranslate"><span class="pre">N</span></code>. When
characters are read the additional character will be placed in the buffer and will
be included in the result of a subsequent <code class="docutils literal notranslate"><span class="pre">any()</span></code> call.</p>
<p>If buffered input is not used (<code class="docutils literal notranslate"><span class="pre">read_buf_len</span></code> == 0) the arrival of a character will
cause <code class="docutils literal notranslate"><span class="pre">nRTS</span></code> to go <code class="docutils literal notranslate"><span class="pre">False</span></code> until the character is read.</p>
</section>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="pyb.Timer.html" title="class Timer – control internal timers"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> class Timer – control internal timers </span>
              </div>
            </a>
          
          
            <a href="pyb.USB_HID.html" title="class USB_HID – USB Human Interface Device (HID)"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> class USB_HID – USB Human Interface Device (HID) </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright - The MicroPython Documentation is Copyright © 2014-2022, Damien P. George, Paul Sokolovsky, and contributors.
              
          </div>
            Last updated on
              21 6月 2022.
            <br/>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 5.0.2.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>