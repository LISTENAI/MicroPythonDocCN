
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>esp — functions related to the ESP8266 and ESP32 &#8212; MicroPython 1.18 文档</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="esp32 — functionality specific to the ESP32" href="esp32.html" />
    <link rel="prev" title="class TimerWiPy – control hardware timers" href="machine.TimerWiPy.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=blue-grey data-md-color-accent=blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#library/esp" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="MicroPython 1.18 文档"
           class="md-header-nav__button md-logo">
          
            &nbsp;
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">MicroPython 1.18 文档</span>
          <span class="md-header-nav__topic"> esp — functions related to the ESP8266 and ESP32 </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
      
  
  <script src="../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../"versions.json"",
        target_loc = "../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">MicroPython 1.18 文档</a></li>
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">MicroPython libraries</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="MicroPython 1.18 文档" class="md-nav__button md-logo">
      
        <img src="../_static/" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="MicroPython 1.18 文档">MicroPython 1.18 文档</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="index.html" class="md-nav__link">MicroPython libraries</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../reference/index.html" class="md-nav__link">MicroPython language and implementation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../genrst/index.html" class="md-nav__link">MicroPython differences from CPython</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop/index.html" class="md-nav__link">MicroPython Internals</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../license.html" class="md-nav__link">MicroPython license information</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../pyboard/quickref.html" class="md-nav__link">Quick reference for the pyboard</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../esp8266/quickref.html" class="md-nav__link">Quick reference for the ESP8266</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../esp32/quickref.html" class="md-nav__link">Quick reference for the ESP32</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../rp2/quickref.html" class="md-nav__link">Quick reference for the RP2</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../wipy/quickref.html" class="md-nav__link">Quick reference for the WiPy</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../unix/quickref.html" class="md-nav__link">Quick reference for the UNIX and Windows ports</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../zephyr/quickref.html" class="md-nav__link">Quick reference for the Zephyr port</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#library-esp--page-root" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">esp</span></code> — functions related to the ESP8266 and ESP32</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#functions" class="md-nav__link">Functions</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="module-esp">
<span id="esp-functions-related-to-the-esp8266-and-esp32"></span><h1 id="library-esp--page-root"><a class="reference internal" href="#library-esp--page-root" title="esp: functions related to the ESP8266 and ESP32"><code class="xref py py-mod docutils literal notranslate"><span class="pre">esp</span></code></a> — functions related to the ESP8266 and ESP32<a class="headerlink" href="#library-esp--page-root" title="永久链接至标题">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">esp</span></code> module contains specific functions related to both the ESP8266 and
ESP32 modules.  Some functions are only available on one or the other of these
ports.</p>
<section id="functions">
<h2 id="functions">Functions<a class="headerlink" href="#functions" title="永久链接至标题">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="esp.sleep_type">
<span class="sig-prename descclassname"><span class="pre">esp.</span></span><span class="sig-name descname"><span class="pre">sleep_type</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">sleep_type</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#esp.sleep_type" title="永久链接至目标">¶</a></dt>
<dd><p><strong>Note</strong>: ESP8266 only</p>
<p>Get or set the sleep type.</p>
<p>If the <em>sleep_type</em> parameter is provided, sets the sleep type to its
value. If the function is called without parameters, returns the current
sleep type.</p>
<p>The possible sleep types are defined as constants:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SLEEP_NONE</span></code> – all functions enabled,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SLEEP_MODEM</span></code> – modem sleep, shuts down the WiFi Modem circuit.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SLEEP_LIGHT</span></code> – light sleep, shuts down the WiFi Modem circuit
and suspends the processor periodically.</p></li>
</ul>
</div></blockquote>
<p>The system enters the set sleep mode automatically when possible.</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="esp.deepsleep">
<span class="sig-prename descclassname"><span class="pre">esp.</span></span><span class="sig-name descname"><span class="pre">deepsleep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time_us</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#esp.deepsleep" title="永久链接至目标">¶</a></dt>
<dd><p><strong>Note</strong>: ESP8266 only - use <a class="reference internal" href="machine.html#machine.deepsleep" title="machine.deepsleep"><code class="xref any py py-func docutils literal notranslate"><span class="pre">machine.deepsleep()</span></code></a> on ESP32</p>
<p>Enter deep sleep.</p>
<p>The whole module powers down, except for the RTC clock circuit, which can
be used to restart the module after the specified time if the pin 16 is
connected to the reset pin. Otherwise the module will sleep until manually
reset.</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="esp.flash_id">
<span class="sig-prename descclassname"><span class="pre">esp.</span></span><span class="sig-name descname"><span class="pre">flash_id</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#esp.flash_id" title="永久链接至目标">¶</a></dt>
<dd><p><strong>Note</strong>: ESP8266 only</p>
<p>Read the device ID of the flash memory.</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="esp.flash_size">
<span class="sig-prename descclassname"><span class="pre">esp.</span></span><span class="sig-name descname"><span class="pre">flash_size</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#esp.flash_size" title="永久链接至目标">¶</a></dt>
<dd><p>Read the total size of the flash memory.</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="esp.flash_user_start">
<span class="sig-prename descclassname"><span class="pre">esp.</span></span><span class="sig-name descname"><span class="pre">flash_user_start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#esp.flash_user_start" title="永久链接至目标">¶</a></dt>
<dd><p>Read the memory offset at which the user flash space begins.</p>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="esp.flash_read">
<span class="sig-prename descclassname"><span class="pre">esp.</span></span><span class="sig-name descname"><span class="pre">flash_read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">byte_offset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length_or_buffer</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#esp.flash_read" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="esp.flash_write">
<span class="sig-prename descclassname"><span class="pre">esp.</span></span><span class="sig-name descname"><span class="pre">flash_write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">byte_offset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#esp.flash_write" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="esp.flash_erase">
<span class="sig-prename descclassname"><span class="pre">esp.</span></span><span class="sig-name descname"><span class="pre">flash_erase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sector_no</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#esp.flash_erase" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="esp.set_native_code_location">
<span class="sig-prename descclassname"><span class="pre">esp.</span></span><span class="sig-name descname"><span class="pre">set_native_code_location</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#esp.set_native_code_location" title="永久链接至目标">¶</a></dt>
<dd><p><strong>Note</strong>: ESP8266 only</p>
<p>Set the location that native code will be placed for execution after it is
compiled.  Native code is emitted when the <code class="docutils literal notranslate"><span class="pre">@micropython.native</span></code>,
<code class="docutils literal notranslate"><span class="pre">@micropython.viper</span></code> and <code class="docutils literal notranslate"><span class="pre">@micropython.asm_xtensa</span></code> decorators are applied
to a function.  The ESP8266 must execute code from either iRAM or the lower
1MByte of flash (which is memory mapped), and this function controls the
location.</p>
<p>If <em>start</em> and <em>length</em> are both <code class="docutils literal notranslate"><span class="pre">None</span></code> then the native code location is
set to the unused portion of memory at the end of the iRAM1 region.  The
size of this unused portion depends on the firmware and is typically quite
small (around 500 bytes), and is enough to store a few very small
functions.  The advantage of using this iRAM1 region is that it does not
get worn out by writing to it.</p>
<p>If neither <em>start</em> nor <em>length</em> are <code class="docutils literal notranslate"><span class="pre">None</span></code> then they should be integers.
<em>start</em> should specify the byte offset from the beginning of the flash at
which native code should be stored.  <em>length</em> specifies how many bytes of
flash from <em>start</em> can be used to store native code.  <em>start</em> and <em>length</em>
should be multiples of the sector size (being 4096 bytes).  The flash will
be automatically erased before writing to it so be sure to use a region of
flash that is not otherwise used, for example by the firmware or the
filesystem.</p>
<p>When using the flash to store native code <em>start+length</em> must be less
than or equal to 1MByte.  Note that the flash can be worn out if repeated
erasures (and writes) are made so use this feature sparingly.
In particular, native code needs to be recompiled and rewritten to flash
on each boot (including wake from deepsleep).</p>
<p>In both cases above, using iRAM1 or flash, if there is no more room left
in the specified region then the use of a native decorator on a function
will lead to <a class="reference internal" href="builtins.html#MemoryError" title="MemoryError"><code class="xref any py py-exc docutils literal notranslate"><span class="pre">MemoryError</span></code></a> exception being raised during compilation of
that function.</p>
</dd></dl>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="machine.TimerWiPy.html" title="class TimerWiPy – control hardware timers"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> class TimerWiPy – control hardware timers </span>
              </div>
            </a>
          
          
            <a href="esp32.html" title="esp32 — functionality specific to the ESP32"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> <code class="xref py py-mod docutils literal notranslate"><span class="pre">esp32</span></code> — functionality specific to the ESP32 </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright - The MicroPython Documentation is Copyright © 2014-2022, Damien P. George, Paul Sokolovsky, and contributors.
              
          </div>
            Last updated on
              10 2月 2022.
            <br/>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>