
<!DOCTYPE html>

<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>socket – socket module &#8212; MicroPython 1.18 文档</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="ssl – SSL/TLS module" href="ssl.html" />
    <link rel="prev" title="select – wait for events on a set of streams" href="select.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=blue data-md-color-accent=light-blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#library/socket" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="MicroPython 1.18 文档"
           class="md-header-nav__button md-logo">
          
            &nbsp;
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">MicroPython 1.18 文档</span>
          <span class="md-header-nav__topic"> socket – socket module </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
      
  
  <script src="../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../"versions.json"",
        target_loc = "../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">MicroPython 1.18 文档</a></li>
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">MicroPython 库</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="MicroPython 1.18 文档" class="md-nav__button md-logo">
      
        <img src="../_static/" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="MicroPython 1.18 文档">MicroPython 1.18 文档</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="index.html" class="md-nav__link">MicroPython 库</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="index.html#python-standard-libraries-and-micro-libraries" class="md-nav__link">Python 标准库和微型库</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="array.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">array</span></code> – 数值数据数组</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="binascii.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">binascii</span></code> – 二进制/ASCII 转换</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="builtins.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">builtins</span></code> – builtin functions and exceptions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="cmath.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cmath</span></code> – mathematical functions for complex numbers</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="collections.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">collections</span></code> – collection and container types</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="errno.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">errno</span></code> – system error codes</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="gc.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gc</span></code> – control the garbage collector</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="hashlib.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">hashlib</span></code> – hashing algorithms</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="heapq.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">heapq</span></code> – heap queue algorithm</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="io.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">io</span></code> – input/output streams</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="json.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">json</span></code> – JSON encoding and decoding</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="math.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">math</span></code> – mathematical functions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="os.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code> – basic “operating system” services</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="random.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">random</span></code> – generate random numbers</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="re.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">re</span></code> – simple regular expressions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="select.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">select</span></code> – wait for events on a set of streams</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> <code class="xref py py-mod docutils literal notranslate"><span class="pre">socket</span></code> – socket module </label>
    
      <a href="#" class="md-nav__link md-nav__link--active"><code class="xref py py-mod docutils literal notranslate"><span class="pre">socket</span></code> – socket module</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#library-socket--page-root" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">socket</span></code> – socket module</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#socket-address-format-s" class="md-nav__link">Socket address format(s)</a>
        </li>
        <li class="md-nav__item"><a href="#functions" class="md-nav__link">Functions</a>
        </li>
        <li class="md-nav__item"><a href="#constants" class="md-nav__link">Constants</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#class-socket" class="md-nav__link">class socket</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#methods" class="md-nav__link">Methods</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="#socket-address-format-s" class="md-nav__link">Socket address format(s)</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#functions" class="md-nav__link">Functions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#constants" class="md-nav__link">Constants</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#methods" class="md-nav__link">Methods</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="ssl.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ssl</span></code> – SSL/TLS module</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="struct.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">struct</span></code> – pack and unpack primitive data types</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="sys.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sys</span></code> – system specific functions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="time.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">time</span></code> – time related functions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="uasyncio.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">uasyncio</span></code> — asynchronous I/O scheduler</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="zlib.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">zlib</span></code> – zlib decompression</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="_thread.html" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">_thread</span></code> – multithreading support</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html#micropython-specific-libraries" class="md-nav__link">MicroPython 的特定库</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html#port-specific-libraries" class="md-nav__link">适配端的特定库</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html#extending-built-in-libraries-from-python" class="md-nav__link">扩展 Python 内置库</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../reference/index.html" class="md-nav__link">MicroPython 语言与实现</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../genrst/index.html" class="md-nav__link">MicroPython differences from CPython</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop/index.html" class="md-nav__link">MicroPython 内部实现</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../license.html" class="md-nav__link">MicroPython 开源协议信息</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../pyboard/quickref.html" class="md-nav__link">Quick reference for the pyboard</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../esp8266/quickref.html" class="md-nav__link">Quick reference for the ESP8266</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../esp32/quickref.html" class="md-nav__link">Quick reference for the ESP32</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../rp2/quickref.html" class="md-nav__link">Quick reference for the RP2</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../wipy/quickref.html" class="md-nav__link">Quick reference for the WiPy</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../unix/quickref.html" class="md-nav__link">Quick reference for the UNIX and Windows ports</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../zephyr/quickref.html" class="md-nav__link">Zephyr 适配的快速参考</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#library-socket--page-root" class="md-nav__link"><code class="xref py py-mod docutils literal notranslate"><span class="pre">socket</span></code> – socket module</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#socket-address-format-s" class="md-nav__link">Socket address format(s)</a>
        </li>
        <li class="md-nav__item"><a href="#functions" class="md-nav__link">Functions</a>
        </li>
        <li class="md-nav__item"><a href="#constants" class="md-nav__link">Constants</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#class-socket" class="md-nav__link">class socket</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#methods" class="md-nav__link">Methods</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="module-socket">
<span id="socket-socket-module"></span><h1 id="library-socket--page-root"><a class="reference internal" href="#library-socket--page-root" title="socket: socket module"><code class="xref py py-mod docutils literal notranslate"><span class="pre">socket</span></code></a> – socket module<a class="headerlink" href="#library-socket--page-root" title="Permalink to this heading">¶</a></h1>
<p><em>This module implements a subset of the corresponding</em> <a class="reference internal" href="../reference/glossary.html#term-CPython"><span class="xref std std-term">CPython</span></a> <em>module,
as described below. For more information, refer to the original
CPython documentation:</em> <a class="reference external" href="https://docs.python.org/3.5/library/socket.html#module-socket" title="(在 Python v3.5)"><code class="docutils literal notranslate"><span class="pre">socket</span></code></a>.</p>
<p>This module provides access to the BSD socket interface.</p>
<div class="attention admonition">
<p class="admonition-title">Difference to CPython</p>
<p>For efficiency and consistency, socket objects in MicroPython implement a <a class="reference internal" href="../reference/glossary.html#term-stream"><code class="xref any std std-term docutils literal notranslate"><span class="pre">stream</span></code></a>
(file-like) interface directly. In CPython, you need to convert a socket to
a file-like object using <a class="reference internal" href="#socket.socket.makefile" title="socket.socket.makefile"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">makefile()</span></code></a> method. This method is still supported
by MicroPython (but is a no-op), so where compatibility with CPython matters,
be sure to use it.</p>
</div>
<section id="socket-address-format-s">
<h2 id="socket-address-format-s">Socket address format(s)<a class="headerlink" href="#socket-address-format-s" title="Permalink to this heading">¶</a></h2>
<p>The native socket address format of the <code class="docutils literal notranslate"><span class="pre">socket</span></code> module is an opaque data type
returned by <a class="reference internal" href="#socket.getaddrinfo" title="socket.getaddrinfo"><code class="xref any py py-func docutils literal notranslate"><span class="pre">getaddrinfo</span></code></a> function, which must be used to resolve textual address
(including numeric addresses):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sockaddr</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">getaddrinfo</span><span class="p">(</span><span class="s1">'www.micropython.org'</span><span class="p">,</span> <span class="mi">80</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="c1"># You must use getaddrinfo() even for numeric addresses</span>
<span class="n">sockaddr</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">getaddrinfo</span><span class="p">(</span><span class="s1">'127.0.0.1'</span><span class="p">,</span> <span class="mi">80</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="c1"># Now you can use that address</span>
<span class="n">sock</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">addr</span><span class="p">)</span>
</pre></div>
</div>
<p>Using <a class="reference internal" href="#socket.getaddrinfo" title="socket.getaddrinfo"><code class="xref any py py-func docutils literal notranslate"><span class="pre">getaddrinfo</span></code></a> is the most efficient (both in terms of memory and processing
power) and portable way to work with addresses.</p>
<p>However, <code class="docutils literal notranslate"><span class="pre">socket</span></code> module (note the difference with native MicroPython
<code class="docutils literal notranslate"><span class="pre">socket</span></code> module described here) provides CPython-compatible way to specify
addresses using tuples, as described below. Note that depending on a
<a class="reference internal" href="../reference/glossary.html#term-MicroPython-port"><span class="xref std std-term">MicroPython port</span></a>, <code class="docutils literal notranslate"><span class="pre">socket</span></code> module can be builtin or need to be
installed from <a class="reference internal" href="../reference/glossary.html#term-micropython-lib"><code class="xref any std std-term docutils literal notranslate"><span class="pre">micropython-lib</span></code></a> (as in the case of <a class="reference internal" href="../reference/glossary.html#term-MicroPython-Unix-port"><span class="xref std std-term">MicroPython Unix port</span></a>),
and some ports still accept only numeric addresses in the tuple format,
and require to use <a class="reference internal" href="#socket.getaddrinfo" title="socket.getaddrinfo"><code class="xref any py py-func docutils literal notranslate"><span class="pre">getaddrinfo</span></code></a> function to resolve domain names.</p>
<p>Summing up:</p>
<ul class="simple">
<li><p>Always use <a class="reference internal" href="#socket.getaddrinfo" title="socket.getaddrinfo"><code class="xref any py py-func docutils literal notranslate"><span class="pre">getaddrinfo</span></code></a> when writing portable applications.</p></li>
<li><p>Tuple addresses described below can be used as a shortcut for
quick hacks and interactive use, if your port supports them.</p></li>
</ul>
<p>Tuple address format for <code class="docutils literal notranslate"><span class="pre">socket</span></code> module:</p>
<ul class="simple">
<li><p>IPv4: <em>(ipv4_address, port)</em>, where <em>ipv4_address</em> is a string with
dot-notation numeric IPv4 address, e.g. <code class="docutils literal notranslate"><span class="pre">"8.8.8.8"</span></code>, and <em>port</em> is and
integer port number in the range 1-65535. Note the domain names are not
accepted as <em>ipv4_address</em>, they should be resolved first using
<a class="reference internal" href="#socket.getaddrinfo" title="socket.getaddrinfo"><code class="xref any py py-func docutils literal notranslate"><span class="pre">socket.getaddrinfo()</span></code></a>.</p></li>
<li><p>IPv6: <em>(ipv6_address, port, flowinfo, scopeid)</em>, where <em>ipv6_address</em>
is a string with colon-notation numeric IPv6 address, e.g. <code class="docutils literal notranslate"><span class="pre">"2001:db8::1"</span></code>,
and <em>port</em> is an integer port number in the range 1-65535. <em>flowinfo</em>
must be 0. <em>scopeid</em> is the interface scope identifier for link-local
addresses. Note the domain names are not accepted as <em>ipv6_address</em>,
they should be resolved first using <a class="reference internal" href="#socket.getaddrinfo" title="socket.getaddrinfo"><code class="xref any py py-func docutils literal notranslate"><span class="pre">socket.getaddrinfo()</span></code></a>. Availability
of IPv6 support depends on a <a class="reference internal" href="../reference/glossary.html#term-MicroPython-port"><span class="xref std std-term">MicroPython port</span></a>.</p></li>
</ul>
</section>
<section id="functions">
<h2 id="functions">Functions<a class="headerlink" href="#functions" title="Permalink to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="socket.socket">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">socket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">af</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">AF_INET</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">SOCK_STREAM</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proto</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">IPPROTO_TCP</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#socket.socket" title="永久链接至目标">¶</a></dt>
<dd><p>Create a new socket using the given address family, socket type and
protocol number. Note that specifying <em>proto</em> in most cases is not
required (and not recommended, as some MicroPython ports may omit
<code class="docutils literal notranslate"><span class="pre">IPPROTO_*</span></code> constants). Instead, <em>type</em> argument will select needed
protocol automatically:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create STREAM TCP socket</span>
<span class="n">socket</span><span class="p">(</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">SOCK_STREAM</span><span class="p">)</span>
<span class="c1"># Create DGRAM UDP socket</span>
<span class="n">socket</span><span class="p">(</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">SOCK_DGRAM</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="socket.getaddrinfo">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">getaddrinfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">af</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proto</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flags</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#socket.getaddrinfo" title="永久链接至目标">¶</a></dt>
<dd><p>Translate the host/port argument into a sequence of 5-tuples that contain all the
necessary arguments for creating a socket connected to that service. Arguments
<em>af</em>, <em>type</em>, and <em>proto</em> (which have the same meaning as for the <a class="reference internal" href="#socket.socket" title="socket.socket"><code class="xref any py py-func docutils literal notranslate"><span class="pre">socket()</span></code></a> function)
can be used to filter which kind of addresses are returned. If a parameter is not
specified or zero, all combinations of addresses can be returned (requiring
filtering on the user side).</p>
<p>The resulting list of 5-tuples has the following structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">family</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">proto</span><span class="p">,</span> <span class="n">canonname</span><span class="p">,</span> <span class="n">sockaddr</span><span class="p">)</span>
</pre></div>
</div>
<p>The following example shows how to connect to a given url:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">()</span>
<span class="c1"># This assumes that if "type" is not specified, an address for</span>
<span class="c1"># SOCK_STREAM will be returned, which may be not true</span>
<span class="n">s</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">getaddrinfo</span><span class="p">(</span><span class="s1">'www.micropython.org'</span><span class="p">,</span> <span class="mi">80</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<p>Recommended use of filtering params:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">()</span>
<span class="c1"># Guaranteed to return an address which can be connect'ed to for</span>
<span class="c1"># stream operation.</span>
<span class="n">s</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">getaddrinfo</span><span class="p">(</span><span class="s1">'www.micropython.org'</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">SOCK_STREAM</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<div class="attention admonition">
<p class="admonition-title">Difference to CPython</p>
<p>CPython raises a <code class="docutils literal notranslate"><span class="pre">socket.gaierror</span></code> exception (<a class="reference internal" href="builtins.html#OSError" title="OSError"><code class="xref any py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> subclass) in case
of error in this function. MicroPython doesn’t have <code class="docutils literal notranslate"><span class="pre">socket.gaierror</span></code>
and raises OSError directly. Note that error numbers of <a class="reference internal" href="#socket.getaddrinfo" title="socket.getaddrinfo"><code class="xref any py py-func docutils literal notranslate"><span class="pre">getaddrinfo()</span></code></a>
form a separate namespace and may not match error numbers from
the <a class="reference internal" href="errno.html#module-errno" title="errno: system error codes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">errno</span></code></a> module. To distinguish <a class="reference internal" href="#socket.getaddrinfo" title="socket.getaddrinfo"><code class="xref any py py-func docutils literal notranslate"><span class="pre">getaddrinfo()</span></code></a> errors, they are
represented by negative numbers, whereas standard system errors are
positive numbers (error numbers are accessible using <code class="docutils literal notranslate"><span class="pre">e.args[0]</span></code> property
from an exception object). The use of negative values is a provisional
detail which may change in the future.</p>
</div>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="socket.inet_ntop">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">inet_ntop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">af</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_addr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#socket.inet_ntop" title="永久链接至目标">¶</a></dt>
<dd><p>Convert a binary network address <em>bin_addr</em> of the given address family <em>af</em>
to a textual representation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">socket</span><span class="o">.</span><span class="n">inet_ntop</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="sa">b</span><span class="s2">"</span><span class="se">\x7f\0\0\1</span><span class="s2">"</span><span class="p">)</span>
<span class="go">'127.0.0.1'</span>
</pre></div>
</div>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="socket.inet_pton">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">inet_pton</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">af</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">txt_addr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#socket.inet_pton" title="永久链接至目标">¶</a></dt>
<dd><p>Convert a textual network address <em>txt_addr</em> of the given address family <em>af</em>
to a binary representation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">socket</span><span class="o">.</span><span class="n">inet_pton</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="s2">"1.2.3.4"</span><span class="p">)</span>
<span class="go">b'\x01\x02\x03\x04'</span>
</pre></div>
</div>
</dd></dl>
</section>
<section id="constants">
<h2 id="constants">Constants<a class="headerlink" href="#constants" title="Permalink to this heading">¶</a></h2>
<dl class="py data">
<dt class="sig sig-object py" id="socket.AF_INET">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">AF_INET</span></span><a class="headerlink" href="#socket.AF_INET" title="永久链接至目标">¶</a></dt>
<dt class="sig sig-object py" id="socket.AF_INET6">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">AF_INET6</span></span><a class="headerlink" href="#socket.AF_INET6" title="永久链接至目标">¶</a></dt>
<dd><p>Address family types. Availability depends on a particular <a class="reference internal" href="../reference/glossary.html#term-MicroPython-port"><span class="xref std std-term">MicroPython port</span></a>.</p>
</dd></dl>
<dl class="py data">
<dt class="sig sig-object py" id="socket.SOCK_STREAM">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">SOCK_STREAM</span></span><a class="headerlink" href="#socket.SOCK_STREAM" title="永久链接至目标">¶</a></dt>
<dt class="sig sig-object py" id="socket.SOCK_DGRAM">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">SOCK_DGRAM</span></span><a class="headerlink" href="#socket.SOCK_DGRAM" title="永久链接至目标">¶</a></dt>
<dd><p>Socket types.</p>
</dd></dl>
<dl class="py data">
<dt class="sig sig-object py" id="socket.IPPROTO_UDP">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">IPPROTO_UDP</span></span><a class="headerlink" href="#socket.IPPROTO_UDP" title="永久链接至目标">¶</a></dt>
<dt class="sig sig-object py" id="socket.IPPROTO_TCP">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">IPPROTO_TCP</span></span><a class="headerlink" href="#socket.IPPROTO_TCP" title="永久链接至目标">¶</a></dt>
<dd><p>IP protocol numbers. Availability depends on a particular <a class="reference internal" href="../reference/glossary.html#term-MicroPython-port"><span class="xref std std-term">MicroPython port</span></a>.
Note that you don’t need to specify these in a call to <a class="reference internal" href="#socket.socket" title="socket.socket"><code class="xref any py py-func docutils literal notranslate"><span class="pre">socket.socket()</span></code></a>,
because <a class="reference internal" href="#socket.SOCK_STREAM" title="socket.SOCK_STREAM"><code class="xref any py py-data docutils literal notranslate"><span class="pre">SOCK_STREAM</span></code></a> socket type automatically selects <a class="reference internal" href="#socket.IPPROTO_TCP" title="socket.IPPROTO_TCP"><code class="xref any py py-data docutils literal notranslate"><span class="pre">IPPROTO_TCP</span></code></a>, and
<a class="reference internal" href="#socket.SOCK_DGRAM" title="socket.SOCK_DGRAM"><code class="xref any py py-data docutils literal notranslate"><span class="pre">SOCK_DGRAM</span></code></a> - <a class="reference internal" href="#socket.IPPROTO_UDP" title="socket.IPPROTO_UDP"><code class="xref any py py-data docutils literal notranslate"><span class="pre">IPPROTO_UDP</span></code></a>. Thus, the only real use of these constants
is as an argument to <a class="reference internal" href="#socket.socket.setsockopt" title="socket.socket.setsockopt"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">setsockopt()</span></code></a>.</p>
</dd></dl>
<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">socket.SOL_*</span></span></dt>
<dd><p>Socket option levels (an argument to <a class="reference internal" href="#socket.socket.setsockopt" title="socket.socket.setsockopt"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">setsockopt()</span></code></a>). The exact
inventory depends on a <a class="reference internal" href="../reference/glossary.html#term-MicroPython-port"><span class="xref std std-term">MicroPython port</span></a>.</p>
</dd></dl>
<dl class="py data">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">socket.SO_*</span></span></dt>
<dd><p>Socket options (an argument to <a class="reference internal" href="#socket.socket.setsockopt" title="socket.socket.setsockopt"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">setsockopt()</span></code></a>). The exact
inventory depends on a <a class="reference internal" href="../reference/glossary.html#term-MicroPython-port"><span class="xref std std-term">MicroPython port</span></a>.</p>
</dd></dl>
<p>Constants specific to WiPy:</p>
<dl class="py data">
<dt class="sig sig-object py" id="socket.IPPROTO_SEC">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">IPPROTO_SEC</span></span><a class="headerlink" href="#socket.IPPROTO_SEC" title="永久链接至目标">¶</a></dt>
<dd><p>Special protocol value to create SSL-compatible socket.</p>
</dd></dl>
<section id="class-socket">
<h3 id="class-socket">class socket<a class="headerlink" href="#class-socket" title="Permalink to this heading">¶</a></h3>
</section>
</section>
<section id="methods">
<h2 id="methods">Methods<a class="headerlink" href="#methods" title="Permalink to this heading">¶</a></h2>
<dl class="py method">
<dt class="sig sig-object py" id="socket.socket.close">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#socket.socket.close" title="永久链接至目标">¶</a></dt>
<dd><p>Mark the socket closed and release all resources. Once that happens, all future operations
on the socket object will fail. The remote end will receive EOF indication if
supported by protocol.</p>
<p>Sockets are automatically closed when they are garbage-collected, but it is recommended
to <a class="reference internal" href="#socket.socket.close" title="socket.socket.close"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> them explicitly as soon you finished working with them.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="socket.socket.bind">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">bind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">address</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#socket.socket.bind" title="永久链接至目标">¶</a></dt>
<dd><p>Bind the socket to <em>address</em>. The socket must not already be bound.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="socket.socket.listen">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">listen</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">backlog</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#socket.socket.listen" title="永久链接至目标">¶</a></dt>
<dd><p>Enable a server to accept connections. If <em>backlog</em> is specified, it must be at least 0
(if it’s lower, it will be set to 0); and specifies the number of unaccepted connections
that the system will allow before refusing new connections. If not specified, a default
reasonable value is chosen.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="socket.socket.accept">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">accept</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#socket.socket.accept" title="永久链接至目标">¶</a></dt>
<dd><p>Accept a connection. The socket must be bound to an address and listening for connections.
The return value is a pair (conn, address) where conn is a new socket object usable to send
and receive data on the connection, and address is the address bound to the socket on the
other end of the connection.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="socket.socket.connect">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">address</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#socket.socket.connect" title="永久链接至目标">¶</a></dt>
<dd><p>Connect to a remote socket at <em>address</em>.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="socket.socket.send">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">send</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#socket.socket.send" title="永久链接至目标">¶</a></dt>
<dd><p>Send data to the socket. The socket must be connected to a remote socket.
Returns number of bytes sent, which may be smaller than the length of data
(“short write”).</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="socket.socket.sendall">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">sendall</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#socket.socket.sendall" title="永久链接至目标">¶</a></dt>
<dd><p>Send all data to the socket. The socket must be connected to a remote socket.
Unlike <a class="reference internal" href="#socket.socket.send" title="socket.socket.send"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">send()</span></code></a>, this method will try to send all of data, by sending data
chunk by chunk consecutively.</p>
<p>The behaviour of this method on non-blocking sockets is undefined. Due to this,
on MicroPython, it’s recommended to use <a class="reference internal" href="#socket.socket.write" title="socket.socket.write"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">write()</span></code></a> method instead, which
has the same “no short writes” policy for blocking sockets, and will return
number of bytes sent on non-blocking sockets.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="socket.socket.recv">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">recv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bufsize</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#socket.socket.recv" title="永久链接至目标">¶</a></dt>
<dd><p>Receive data from the socket. The return value is a bytes object representing the data
received. The maximum amount of data to be received at once is specified by bufsize.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="socket.socket.sendto">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">sendto</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">address</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#socket.socket.sendto" title="永久链接至目标">¶</a></dt>
<dd><p>Send data to the socket. The socket should not be connected to a remote socket, since the
destination socket is specified by <em>address</em>.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="socket.socket.recvfrom">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">recvfrom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bufsize</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#socket.socket.recvfrom" title="永久链接至目标">¶</a></dt>
<dd><p>Receive data from the socket. The return value is a pair <em>(bytes, address)</em> where <em>bytes</em> is a
bytes object representing the data received and <em>address</em> is the address of the socket sending
the data.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="socket.socket.setsockopt">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">setsockopt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#socket.socket.setsockopt" title="永久链接至目标">¶</a></dt>
<dd><p>Set the value of the given socket option. The needed symbolic constants are defined in the
socket module (SO_* etc.). The <em>value</em> can be an integer or a bytes-like object representing
a buffer.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="socket.socket.settimeout">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">settimeout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#socket.socket.settimeout" title="永久链接至目标">¶</a></dt>
<dd><p><strong>Note</strong>: Not every port supports this method, see below.</p>
<p>Set a timeout on blocking socket operations. The value argument can be a nonnegative floating
point number expressing seconds, or None. If a non-zero value is given, subsequent socket operations
will raise an <a class="reference internal" href="builtins.html#OSError" title="OSError"><code class="xref any py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> exception if the timeout period value has elapsed before the operation has
completed. If zero is given, the socket is put in non-blocking mode. If None is given, the socket
is put in blocking mode.</p>
<p>Not every <a class="reference internal" href="../reference/glossary.html#term-MicroPython-port"><span class="xref std std-term">MicroPython port</span></a> supports this method. A more portable and
generic solution is to use <a class="reference internal" href="select.html#select.poll" title="select.poll"><code class="xref any py py-func docutils literal notranslate"><span class="pre">select.poll</span></code></a> object. This allows to wait on
multiple objects at the same time (and not just on sockets, but on generic
<a class="reference internal" href="../reference/glossary.html#term-stream"><code class="xref any std std-term docutils literal notranslate"><span class="pre">stream</span></code></a> objects which support polling). Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Instead of:</span>
<span class="n">s</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>  <span class="c1"># time in seconds</span>
<span class="n">s</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># may timeout</span>

<span class="c1"># Use:</span>
<span class="n">poller</span> <span class="o">=</span> <span class="n">select</span><span class="o">.</span><span class="n">poll</span><span class="p">()</span>
<span class="n">poller</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">select</span><span class="o">.</span><span class="n">POLLIN</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">poller</span><span class="o">.</span><span class="n">poll</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>  <span class="c1"># time in milliseconds</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">res</span><span class="p">:</span>
    <span class="c1"># s is still not ready for input, i.e. operation timed out</span>
</pre></div>
</div>
<div class="attention admonition">
<p class="admonition-title">Difference to CPython</p>
<p>CPython raises a <code class="docutils literal notranslate"><span class="pre">socket.timeout</span></code> exception in case of timeout,
which is an <a class="reference internal" href="builtins.html#OSError" title="OSError"><code class="xref any py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> subclass. MicroPython raises an OSError directly
instead. If you use <code class="docutils literal notranslate"><span class="pre">except</span> <span class="pre">OSError:</span></code> to catch the exception,
your code will work both in MicroPython and CPython.</p>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="socket.socket.setblocking">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">setblocking</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#socket.socket.setblocking" title="永久链接至目标">¶</a></dt>
<dd><p>Set blocking or non-blocking mode of the socket: if flag is false, the socket is set to non-blocking,
else to blocking mode.</p>
<p>This method is a shorthand for certain <a class="reference internal" href="#socket.socket.settimeout" title="socket.socket.settimeout"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">settimeout()</span></code></a> calls:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sock.setblocking(True)</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">sock.settimeout(None)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sock.setblocking(False)</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">sock.settimeout(0)</span></code></p></li>
</ul>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="socket.socket.makefile">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">makefile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rb'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffering</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#socket.socket.makefile" title="永久链接至目标">¶</a></dt>
<dd><p>Return a file object associated with the socket. The exact returned type depends on the arguments
given to makefile(). The support is limited to binary modes only (‘rb’, ‘wb’, and ‘rwb’).
CPython’s arguments: <em>encoding</em>, <em>errors</em> and <em>newline</em> are not supported.</p>
<div class="attention admonition">
<p class="admonition-title">Difference to CPython</p>
<p>As MicroPython doesn’t support buffered streams, values of <em>buffering</em>
parameter is ignored and treated as if it was 0 (unbuffered).</p>
</div>
<div class="attention admonition">
<p class="admonition-title">Difference to CPython</p>
<p>Closing the file object returned by makefile() WILL close the
original socket as well.</p>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="socket.socket.read">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">size</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#socket.socket.read" title="永久链接至目标">¶</a></dt>
<dd><p>Read up to size bytes from the socket. Return a bytes object. If <em>size</em> is not given, it
reads all data available from the socket until EOF; as such the method will not return until
the socket is closed. This function tries to read as much data as
requested (no “short reads”). This may be not possible with
non-blocking socket though, and then less data will be returned.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="socket.socket.readinto">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">readinto</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buf</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">nbytes</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#socket.socket.readinto" title="永久链接至目标">¶</a></dt>
<dd><p>Read bytes into the <em>buf</em>.  If <em>nbytes</em> is specified then read at most
that many bytes.  Otherwise, read at most <em>len(buf)</em> bytes. Just as
<a class="reference internal" href="#socket.socket.read" title="socket.socket.read"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">read()</span></code></a>, this method follows “no short reads” policy.</p>
<p>Return value: number of bytes read and stored into <em>buf</em>.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="socket.socket.readline">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">readline</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#socket.socket.readline" title="永久链接至目标">¶</a></dt>
<dd><p>Read a line, ending in a newline character.</p>
<p>Return value: the line read.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="socket.socket.write">
<span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#socket.socket.write" title="永久链接至目标">¶</a></dt>
<dd><p>Write the buffer of bytes to the socket. This function will try to
write all data to a socket (no “short writes”). This may be not possible
with a non-blocking socket though, and returned value will be less than
the length of <em>buf</em>.</p>
<p>Return value: number of bytes written.</p>
</dd></dl>
<dl class="py exception">
<dt class="sig sig-object py" id="socket.socket.error">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">socket.</span></span><span class="sig-name descname"><span class="pre">error</span></span><a class="headerlink" href="#socket.socket.error" title="永久链接至目标">¶</a></dt>
<dd><p>MicroPython does NOT have this exception.</p>
<div class="attention admonition">
<p class="admonition-title">Difference to CPython</p>
<p>CPython used to have a <code class="docutils literal notranslate"><span class="pre">socket.error</span></code> exception which is now deprecated,
and is an alias of <a class="reference internal" href="builtins.html#OSError" title="OSError"><code class="xref any py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a>. In MicroPython, use <a class="reference internal" href="builtins.html#OSError" title="OSError"><code class="xref any py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> directly.</p>
</div>
</dd></dl>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="select.html" title="select – wait for events on a set of streams"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> <code class="xref py py-mod docutils literal notranslate"><span class="pre">select</span></code> – wait for events on a set of streams </span>
              </div>
            </a>
          
          
            <a href="ssl.html" title="ssl – SSL/TLS module"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> <code class="xref py py-mod docutils literal notranslate"><span class="pre">ssl</span></code> – SSL/TLS module </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright - The MicroPython Documentation is Copyright © 2014-2022, Damien P. George, Paul Sokolovsky, and contributors.
              
          </div>
            Last updated on
              01 7月 2022.
            <br/>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 5.0.2.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>