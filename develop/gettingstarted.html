
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>Getting Started &#8212; MicroPython 1.18 文档</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="Writing tests" href="writingtests.html" />
    <link rel="prev" title="MicroPython Internals" href="index.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=blue data-md-color-accent=light-blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#develop/gettingstarted" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="MicroPython 1.18 文档"
           class="md-header-nav__button md-logo">
          
            &nbsp;
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">MicroPython 1.18 文档</span>
          <span class="md-header-nav__topic"> Getting Started </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
      
  
  <script src="../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../"versions.json"",
        target_loc = "../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">MicroPython 1.18 文档</a></li>
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">MicroPython Internals</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="MicroPython 1.18 文档" class="md-nav__button md-logo">
      
        <img src="../_static/" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="MicroPython 1.18 文档">MicroPython 1.18 文档</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../library/index.html" class="md-nav__link">MicroPython libraries</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../reference/index.html" class="md-nav__link">MicroPython language and implementation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../genrst/index.html" class="md-nav__link">MicroPython differences from CPython</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html" class="md-nav__link">MicroPython Internals</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Getting Started </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Getting Started</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#develop-gettingstarted--page-root" class="md-nav__link">Getting Started</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#source-control-with-git" class="md-nav__link">Source control with git</a>
        </li>
        <li class="md-nav__item"><a href="#get-the-code" class="md-nav__link">Get the code</a>
        </li>
        <li class="md-nav__item"><a href="#compile-and-build-the-code" class="md-nav__link">Compile and build the code</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#required-dependencies" class="md-nav__link">Required dependencies</a>
        </li>
        <li class="md-nav__item"><a href="#building-the-micropython-cross-compiler" class="md-nav__link">Building the MicroPython cross-compiler</a>
        </li>
        <li class="md-nav__item"><a href="#building-the-unix-port-of-micropython" class="md-nav__link">Building the Unix port of MicroPython</a>
        </li>
        <li class="md-nav__item"><a href="#building-the-windows-port" class="md-nav__link">Building the Windows port</a>
        </li>
        <li class="md-nav__item"><a href="#building-the-stm32-port" class="md-nav__link">Building the STM32 port</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#building-the-documentation" class="md-nav__link">Building the documentation</a>
        </li>
        <li class="md-nav__item"><a href="#running-the-tests" class="md-nav__link">Running the tests</a>
        </li>
        <li class="md-nav__item"><a href="#folder-structure" class="md-nav__link">Folder structure</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="#source-control-with-git" class="md-nav__link">Source control with git</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#get-the-code" class="md-nav__link">Get the code</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#compile-and-build-the-code" class="md-nav__link">Compile and build the code</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="#required-dependencies" class="md-nav__link">Required dependencies</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#building-the-micropython-cross-compiler" class="md-nav__link">Building the MicroPython cross-compiler</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#building-the-unix-port-of-micropython" class="md-nav__link">Building the Unix port of MicroPython</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#building-the-windows-port" class="md-nav__link">Building the Windows port</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#building-the-stm32-port" class="md-nav__link">Building the STM32 port</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#building-the-documentation" class="md-nav__link">Building the documentation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#running-the-tests" class="md-nav__link">Running the tests</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#folder-structure" class="md-nav__link">Folder structure</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="writingtests.html" class="md-nav__link">Writing tests</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="compiler.html" class="md-nav__link">The Compiler</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="memorymgt.html" class="md-nav__link">Memory Management</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="library.html" class="md-nav__link">Implementing a Module</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="optimizations.html" class="md-nav__link">Optimizations</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="qstr.html" class="md-nav__link">MicroPython string interning</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="maps.html" class="md-nav__link">Maps and Dictionaries</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="publiccapi.html" class="md-nav__link">The public C API</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="extendingmicropython.html" class="md-nav__link">Extending MicroPython in C</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="porting.html" class="md-nav__link">Porting MicroPython</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../license.html" class="md-nav__link">MicroPython license information</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../pyboard/quickref.html" class="md-nav__link">Quick reference for the pyboard</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../esp8266/quickref.html" class="md-nav__link">Quick reference for the ESP8266</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../esp32/quickref.html" class="md-nav__link">Quick reference for the ESP32</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../rp2/quickref.html" class="md-nav__link">Quick reference for the RP2</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../wipy/quickref.html" class="md-nav__link">Quick reference for the WiPy</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../unix/quickref.html" class="md-nav__link">Quick reference for the UNIX and Windows ports</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../zephyr/quickref.html" class="md-nav__link">Zephyr 适配的快速参考</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#develop-gettingstarted--page-root" class="md-nav__link">Getting Started</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#source-control-with-git" class="md-nav__link">Source control with git</a>
        </li>
        <li class="md-nav__item"><a href="#get-the-code" class="md-nav__link">Get the code</a>
        </li>
        <li class="md-nav__item"><a href="#compile-and-build-the-code" class="md-nav__link">Compile and build the code</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#required-dependencies" class="md-nav__link">Required dependencies</a>
        </li>
        <li class="md-nav__item"><a href="#building-the-micropython-cross-compiler" class="md-nav__link">Building the MicroPython cross-compiler</a>
        </li>
        <li class="md-nav__item"><a href="#building-the-unix-port-of-micropython" class="md-nav__link">Building the Unix port of MicroPython</a>
        </li>
        <li class="md-nav__item"><a href="#building-the-windows-port" class="md-nav__link">Building the Windows port</a>
        </li>
        <li class="md-nav__item"><a href="#building-the-stm32-port" class="md-nav__link">Building the STM32 port</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#building-the-documentation" class="md-nav__link">Building the documentation</a>
        </li>
        <li class="md-nav__item"><a href="#running-the-tests" class="md-nav__link">Running the tests</a>
        </li>
        <li class="md-nav__item"><a href="#folder-structure" class="md-nav__link">Folder structure</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="getting-started">
<span id="gettingstarted"></span><h1 id="develop-gettingstarted--page-root">Getting Started<a class="headerlink" href="#develop-gettingstarted--page-root" title="永久链接至标题">¶</a></h1>
<p>This guide covers a step-by-step process on setting up version control, obtaining and building
a copy of the source code for a port, building the documentation, running tests, and a description of the
directory structure of the MicroPython code base.</p>
<section id="source-control-with-git">
<h2 id="source-control-with-git">Source control with git<a class="headerlink" href="#source-control-with-git" title="永久链接至标题">¶</a></h2>
<p>MicroPython is hosted on <a class="reference external" href="https://github.com/micropython/micropython">GitHub</a> and uses
<a class="reference external" href="https://git-scm.com">Git</a> for source control. The workflow is such that
code is pulled and pushed to and from the main repository. Install the respective version
of Git for your operating system to follow through the rest of the steps.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>For a reference on the installation instructions, please refer to
the <a class="reference external" href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">Git installation instructions</a>.
Learn about the basic git commands in this <a class="reference external" href="https://guides.github.com/introduction/git-handbook/">Git Handbook</a>
or any other sources on the internet.</p>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>A .git-blame-ignore-revs file is included which avoids the output of git blame getting cluttered
by commits which are only for formatting code but have no functional changes. See <a class="reference external" href="https://git-scm.com/docs/git-blame#Documentation/git-blame.txt---ignore-revltrevgt">git blame documentation</a> on how to use this.</p>
</div>
</section>
<section id="get-the-code">
<h2 id="get-the-code">Get the code<a class="headerlink" href="#get-the-code" title="永久链接至标题">¶</a></h2>
<p>It is recommended that you maintain a fork of the MicroPython repository for your development purposes.
The process of obtaining the source code includes the following:</p>
<ol class="arabic simple">
<li><p>Fork the repository <a class="reference external" href="https://github.com/micropython/micropython">https://github.com/micropython/micropython</a></p></li>
<li><p>You will now have a fork at &lt;<a class="reference external" href="https://github.com">https://github.com</a>/&lt;your-user-name&gt;/micropython&gt;.</p></li>
<li><p>Clone the forked repository using the following command:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/&lt;your-user-name&gt;/micropython
</pre></div>
</div>
<p>Then, <a class="reference external" href="https://git-scm.com/book/en/v2/Git-Basics-Working-with-Remotes">configure the remote repositories</a> to be able to
collaborate on the MicroPython project.</p>
<p>Configure remote upstream:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> micropython
$ git remote add upstream https://github.com/micropython/micropython
</pre></div>
</div>
<p>It is common to configure <code class="docutils literal notranslate"><span class="pre">upstream</span></code> and <code class="docutils literal notranslate"><span class="pre">origin</span></code> on a forked repository
to assist with sharing code changes. You can maintain your own mapping but
it is recommended that <code class="docutils literal notranslate"><span class="pre">origin</span></code> maps to your fork and <code class="docutils literal notranslate"><span class="pre">upstream</span></code> to the main
MicroPython repository.</p>
<p>After the above configuration, your setup should be similar to this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git remote -v
origin       https://github.com/&lt;your-user-name&gt;/micropython <span class="o">(</span>fetch<span class="o">)</span>
origin       https://github.com/&lt;your-user-name&gt;/micropython <span class="o">(</span>push<span class="o">)</span>
upstream     https://github.com/micropython/micropython <span class="o">(</span>fetch<span class="o">)</span>
upstream     https://github.com/micropython/micropython <span class="o">(</span>push<span class="o">)</span>
</pre></div>
</div>
<p>You should now have a copy of the source code. By default, you are pointing
to the master branch. To prepare for further development, it is recommended
to work on a development branch.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ git checkout -b dev-branch
</pre></div>
</div>
<p>You can give it any name. You will have to compile MicroPython whenever you change
to a different branch.</p>
</section>
<section id="compile-and-build-the-code">
<h2 id="compile-and-build-the-code">Compile and build the code<a class="headerlink" href="#compile-and-build-the-code" title="永久链接至标题">¶</a></h2>
<p>When compiling MicroPython, you compile a specific <a class="reference internal" href="../reference/glossary.html#term-port"><span class="xref std std-term">port</span></a>, usually
targeting a specific <a class="reference external" href="https://docs.python.org/3.5/glossary.html#glossary" title="(在 Python v3.5)"><span class="xref std std-ref">board</span></a>. Start by installing the required dependencies.
Then build the MicroPython cross-compiler before you can successfully compile and build.
This applies specifically when using Linux to compile.
The Windows instructions are provided in a later section.</p>
<section id="required-dependencies">
<span id="id1"></span><h3 id="required-dependencies">Required dependencies<a class="headerlink" href="#required-dependencies" title="永久链接至标题">¶</a></h3>
<p>Install the required dependencies for Linux:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo apt-get install build-essential libffi-dev git pkg-config
</pre></div>
</div>
<p>For the stm32 port, the ARM cross-compiler is required:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo apt-get install arm-none-eabi-gcc arm-none-eabi-binutils arm-none-eabi-newlib
</pre></div>
</div>
<p>See the <a class="reference external" href="https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm">ARM GCC
toolchain</a>
for the latest details.</p>
<p>Python is also required. Python 2 is supported for now, but we recommend using Python 3.
Check that you have Python available on your system:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ python3
Python <span class="m">3</span>.5.0 <span class="o">(</span>default, Jul <span class="m">17</span> <span class="m">2020</span>, <span class="m">14</span>:04:10<span class="o">)</span>
<span class="o">[</span>GCC <span class="m">5</span>.4.0 <span class="m">20160609</span><span class="o">]</span> on linux
Type <span class="s2">"help"</span>, <span class="s2">"copyright"</span>, <span class="s2">"credits"</span> or <span class="s2">"license"</span> <span class="k">for</span> more information.
&gt;&gt;&gt;
</pre></div>
</div>
<p>All supported ports have different dependency requirements, see their respective
<a class="reference external" href="https://github.com/micropython/micropython/tree/master/ports">readme files</a>.</p>
</section>
<section id="building-the-micropython-cross-compiler">
<h3 id="building-the-micropython-cross-compiler">Building the MicroPython cross-compiler<a class="headerlink" href="#building-the-micropython-cross-compiler" title="永久链接至标题">¶</a></h3>
<p>Almost all ports require building <code class="docutils literal notranslate"><span class="pre">mpy-cross</span></code> first to perform pre-compilation
of Python code that will be included in the port firmware:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> mpy-cross
$ make
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Note that, <code class="docutils literal notranslate"><span class="pre">mpy-cross</span></code> must be built for the host architecture
and not the target architecture.</p>
</div>
<p>If it built successfully, you should see a message similar to this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>LINK mpy-cross
   text          data    bss     dec     hex filename
 <span class="m">279328</span>          <span class="m">776</span>     <span class="m">880</span>  <span class="m">280984</span>   <span class="m">44998</span> mpy-cross
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">-C</span> <span class="pre">mpy-cross</span></code> to build the cross-compiler in one statement
without moving to the <code class="docutils literal notranslate"><span class="pre">mpy-cross</span></code> directory otherwise, you will need
to do <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">..</span></code> for the next steps.</p>
</div>
</section>
<section id="building-the-unix-port-of-micropython">
<h3 id="building-the-unix-port-of-micropython">Building the Unix port of MicroPython<a class="headerlink" href="#building-the-unix-port-of-micropython" title="永久链接至标题">¶</a></h3>
<p>The Unix port is a version of MicroPython that runs on Linux, macOS, and other Unix-like operating systems.
It’s extremely useful for developing MicroPython as it avoids having to deploy your code to a device to test it.
In many ways, it works a lot like CPython’s python binary.</p>
<p>To build for the Unix port, make sure all Linux related dependencies are installed as detailed in the
required dependencies section. See the <a class="reference internal" href="#required-dependencies"><span class="std std-ref">Required dependencies</span></a>
to make sure that all dependencies are installed for this port. Also, make sure you have a working
environment for <code class="docutils literal notranslate"><span class="pre">gcc</span></code> and <code class="docutils literal notranslate"><span class="pre">GNU</span> <span class="pre">make</span></code>. Ubuntu 20.04 has been used for the example
below but other unixes ought to work with little modification:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ gcc --version
gcc <span class="o">(</span>Ubuntu <span class="m">9</span>.3.0-10ubuntu2<span class="o">)</span> <span class="m">9</span>.3.0
Copyright <span class="o">(</span>C<span class="o">)</span> <span class="m">2019</span> Free Software Foundation, Inc.
This is free software<span class="p">;</span> see the <span class="nb">source</span> <span class="k">for</span> copying conditions.  There is NO
warranty<span class="p">;</span> not even <span class="k">for</span> MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.then build:
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> ports/unix
$ make submodules
$ make
</pre></div>
</div>
<p>If MicroPython built correctly, you should see the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>LINK micropython
   text         data     bss     dec     hex filename
 <span class="m">412033</span>         <span class="m">5680</span>    <span class="m">2496</span>  <span class="m">420209</span>   <span class="m">66971</span> micropython
</pre></div>
</div>
<p>Now run it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./micropython
MicroPython v1.13-38-gc67012d-dirty on <span class="m">2020</span>-09-13<span class="p">;</span> linux version
Use Ctrl-D to exit, Ctrl-E <span class="k">for</span> paste mode
&gt;&gt;&gt; print<span class="o">(</span><span class="s2">"hello world"</span><span class="o">)</span>
hello world
&gt;&gt;&gt;
</pre></div>
</div>
</section>
<section id="building-the-windows-port">
<h3 id="building-the-windows-port">Building the Windows port<a class="headerlink" href="#building-the-windows-port" title="永久链接至标题">¶</a></h3>
<p>The Windows port includes a Visual Studio project file micropython.vcxproj that you can use to build micropython.exe.
It can be opened in Visual Studio or built from the command line using msbuild. Alternatively, it can be built using mingw,
either in Windows with Cygwin, or on Linux.
See <a class="reference external" href="https://github.com/micropython/micropython/tree/master/ports/windows">windows port documentation</a> for more information.</p>
</section>
<section id="building-the-stm32-port">
<h3 id="building-the-stm32-port">Building the STM32 port<a class="headerlink" href="#building-the-stm32-port" title="永久链接至标题">¶</a></h3>
<p>Like the Unix port, you need to install some required dependencies
as detailed in the <a class="reference internal" href="#required-dependencies"><span class="std std-ref">Required dependencies</span></a> section, then build:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> ports/stm32
$ make submodules
$ make
</pre></div>
</div>
<p>Please refer to the <a class="reference external" href="https://github.com/micropython/micropython/tree/master/ports/stm32">stm32 documentation</a>
for more details on flashing the firmware.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>See the <a class="reference internal" href="#required-dependencies"><span class="std std-ref">Required dependencies</span></a> to make sure that all dependencies are installed for this port.
The cross-compiler is needed. <code class="docutils literal notranslate"><span class="pre">arm-none-eabi-gcc</span></code> should also be in the $PATH or specified manually
via CROSS_COMPILE, either by setting the environment variable or in the <code class="docutils literal notranslate"><span class="pre">make</span></code> command line arguments.</p>
</div>
<p>You can also specify which board to use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> ports/stm32
$ make submodules
$ make <span class="nv">BOARD</span><span class="o">=</span>&lt;board&gt;
</pre></div>
</div>
<p>See <a class="reference external" href="https://github.com/micropython/micropython/tree/master/ports/stm32/boards">ports/stm32/boards</a>
for the available boards. e.g. “PYBV11” or “NUCLEO_WB55”.</p>
</section>
</section>
<section id="building-the-documentation">
<h2 id="building-the-documentation">Building the documentation<a class="headerlink" href="#building-the-documentation" title="永久链接至标题">¶</a></h2>
<p>MicroPython documentation is created using <code class="docutils literal notranslate"><span class="pre">Sphinx</span></code>. If you have already
installed Python, then install <code class="docutils literal notranslate"><span class="pre">Sphinx</span></code> using <code class="docutils literal notranslate"><span class="pre">pip</span></code>. It is recommended
that you use a virtual environment:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ python3 -m venv env
$ <span class="nb">source</span> env/bin/activate
$ pip install sphinx
</pre></div>
</div>
<p>Navigate to the <code class="docutils literal notranslate"><span class="pre">docs</span></code> directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> docs
</pre></div>
</div>
<p>Build the docs:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ make html
</pre></div>
</div>
<p>Open <code class="docutils literal notranslate"><span class="pre">docs/build/html/index.html</span></code> in your browser to view the docs locally. Refer to the
documentation on <a class="reference external" href="https://docs.readthedocs.io/en/stable/intro/import-guide.html">importing your documentation</a> to use Read the Docs.</p>
</section>
<section id="running-the-tests">
<h2 id="running-the-tests">Running the tests<a class="headerlink" href="#running-the-tests" title="永久链接至标题">¶</a></h2>
<p>To run all tests in the test suite on the Unix port use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> ports/unix
$ make <span class="nb">test</span>
</pre></div>
</div>
<p>To run a selection of tests on a board/device connected over USB use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> tests
$ ./run-tests.py --target minimal --device /dev/ttyACM0
</pre></div>
</div>
<p>See also <a class="reference internal" href="writingtests.html#writingtests"><span class="std std-ref">Writing tests</span></a>.</p>
</section>
<section id="folder-structure">
<h2 id="folder-structure">Folder structure<a class="headerlink" href="#folder-structure" title="永久链接至标题">¶</a></h2>
<p>There are a couple of directories to take note of in terms of where certain implementation details
are. The following is a break down of the top-level folders in the source code.</p>
<p>py</p>
<blockquote>
<div><p>Contains the compiler, runtime, and core library implementation.</p>
</div></blockquote>
<p>mpy-cross</p>
<blockquote>
<div><p>Has the MicroPython cross-compiler which pre-compiles the Python scripts to bytecode.</p>
</div></blockquote>
<p>ports</p>
<blockquote>
<div><p>Code for all the versions of MicroPython for the supported ports.</p>
</div></blockquote>
<p>lib</p>
<blockquote>
<div><p>Low-level C libraries used by any port which are mostly 3rd-party libraries.</p>
</div></blockquote>
<p>drivers</p>
<blockquote>
<div><p>Has drivers for specific hardware and intended to work across multiple ports.</p>
</div></blockquote>
<p>extmod</p>
<blockquote>
<div><p>Contains a C implementation of more non-core modules.</p>
</div></blockquote>
<p>docs</p>
<blockquote>
<div><p>Has the standard documentation found at <a class="reference external" href="https://docs.micropython.org/">https://docs.micropython.org/</a>.</p>
</div></blockquote>
<p>tests</p>
<blockquote>
<div><p>An implementation of the test suite.</p>
</div></blockquote>
<p>tools</p>
<blockquote>
<div><p>Contains helper tools including the <code class="docutils literal notranslate"><span class="pre">upip</span></code> and the <code class="docutils literal notranslate"><span class="pre">pyboard.py</span></code> module.</p>
</div></blockquote>
<p>examples</p>
<blockquote>
<div><p>Example code for building MicroPython as a library as well as native modules.</p>
</div></blockquote>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="index.html" title="MicroPython Internals"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> MicroPython Internals </span>
              </div>
            </a>
          
          
            <a href="writingtests.html" title="Writing tests"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Writing tests </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright - The MicroPython Documentation is Copyright © 2014-2022, Damien P. George, Paul Sokolovsky, and contributors.
              
          </div>
            Last updated on
              14 2月 2022.
            <br/>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>