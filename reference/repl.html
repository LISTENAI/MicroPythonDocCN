
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../_static/javascripts/modernizr.js"></script>
  
  
  
    <title>The MicroPython Interactive Interpreter Mode (aka REPL) &#8212; MicroPython 1.18 文档</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/material.css" />
    <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="MicroPython remote control: mpremote" href="mpremote.html" />
    <link rel="prev" title="Glossary" href="glossary.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=blue data-md-color-accent=light-blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#reference/repl" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="MicroPython 1.18 文档"
           class="md-header-nav__button md-logo">
          
            &nbsp;
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">MicroPython 1.18 文档</span>
          <span class="md-header-nav__topic"> The MicroPython Interactive Interpreter Mode (aka REPL) </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
      
  
  <script src="../_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../"versions.json"",
        target_loc = "../../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
          <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">MicroPython 1.18 文档</a></li>
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">MicroPython language and implementation</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="MicroPython 1.18 文档" class="md-nav__button md-logo">
      
        <img src="../_static/" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../index.html"
       title="MicroPython 1.18 文档">MicroPython 1.18 文档</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
    
      <a href="../library/index.html" class="md-nav__link">MicroPython libraries</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html" class="md-nav__link">MicroPython language and implementation</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="glossary.html" class="md-nav__link">Glossary</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> The MicroPython Interactive Interpreter Mode (aka REPL) </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">The MicroPython Interactive Interpreter Mode (aka REPL)</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#reference-repl--page-root" class="md-nav__link">The MicroPython Interactive Interpreter Mode (aka REPL)</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#auto-indent" class="md-nav__link">Auto-indent</a>
        </li>
        <li class="md-nav__item"><a href="#auto-completion" class="md-nav__link">Auto-completion</a>
        </li>
        <li class="md-nav__item"><a href="#interrupting-a-running-program" class="md-nav__link">Interrupting a running program</a>
        </li>
        <li class="md-nav__item"><a href="#paste-mode" class="md-nav__link">Paste mode</a>
        </li>
        <li class="md-nav__item"><a href="#soft-reset" class="md-nav__link">Soft reset</a>
        </li>
        <li class="md-nav__item"><a href="#the-special-variable-underscore" class="md-nav__link">The special variable _ (underscore)</a>
        </li>
        <li class="md-nav__item"><a href="#raw-mode-and-raw-paste-mode" class="md-nav__link">Raw mode and raw-paste mode</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="#auto-indent" class="md-nav__link">Auto-indent</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#auto-completion" class="md-nav__link">Auto-completion</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#interrupting-a-running-program" class="md-nav__link">Interrupting a running program</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#paste-mode" class="md-nav__link">Paste mode</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#soft-reset" class="md-nav__link">Soft reset</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#the-special-variable-underscore" class="md-nav__link">The special variable _ (underscore)</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#raw-mode-and-raw-paste-mode" class="md-nav__link">Raw mode and raw-paste mode</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="mpremote.html" class="md-nav__link">MicroPython remote control: mpremote</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="mpyfiles.html" class="md-nav__link">MicroPython .mpy files</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="isr_rules.html" class="md-nav__link">Writing interrupt handlers</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="speed_python.html" class="md-nav__link">Maximising MicroPython speed</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="constrained.html" class="md-nav__link">MicroPython on microcontrollers</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="manifest.html" class="md-nav__link">MicroPython manifest files</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="packages.html" class="md-nav__link">Distribution packages, package management, and deploying applications</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="asm_thumb2_index.html" class="md-nav__link">Inline assembler for Thumb2 architectures</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="filesystem.html" class="md-nav__link">Working with filesystems</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="pyboard.py.html" class="md-nav__link">The pyboard.py tool</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../genrst/index.html" class="md-nav__link">MicroPython differences from CPython</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../develop/index.html" class="md-nav__link">MicroPython Internals</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../license.html" class="md-nav__link">MicroPython license information</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../pyboard/quickref.html" class="md-nav__link">Quick reference for the pyboard</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../esp8266/quickref.html" class="md-nav__link">Quick reference for the ESP8266</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../esp32/quickref.html" class="md-nav__link">Quick reference for the ESP32</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../rp2/quickref.html" class="md-nav__link">Quick reference for the RP2</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../wipy/quickref.html" class="md-nav__link">Quick reference for the WiPy</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../unix/quickref.html" class="md-nav__link">Quick reference for the UNIX and Windows ports</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../zephyr/quickref.html" class="md-nav__link">Zephyr 适配的快速参考</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#reference-repl--page-root" class="md-nav__link">The MicroPython Interactive Interpreter Mode (aka REPL)</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#auto-indent" class="md-nav__link">Auto-indent</a>
        </li>
        <li class="md-nav__item"><a href="#auto-completion" class="md-nav__link">Auto-completion</a>
        </li>
        <li class="md-nav__item"><a href="#interrupting-a-running-program" class="md-nav__link">Interrupting a running program</a>
        </li>
        <li class="md-nav__item"><a href="#paste-mode" class="md-nav__link">Paste mode</a>
        </li>
        <li class="md-nav__item"><a href="#soft-reset" class="md-nav__link">Soft reset</a>
        </li>
        <li class="md-nav__item"><a href="#the-special-variable-underscore" class="md-nav__link">The special variable _ (underscore)</a>
        </li>
        <li class="md-nav__item"><a href="#raw-mode-and-raw-paste-mode" class="md-nav__link">Raw mode and raw-paste mode</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="the-micropython-interactive-interpreter-mode-aka-repl">
<h1 id="reference-repl--page-root">The MicroPython Interactive Interpreter Mode (aka REPL)<a class="headerlink" href="#reference-repl--page-root" title="永久链接至标题">¶</a></h1>
<p>This section covers some characteristics of the MicroPython Interactive
Interpreter Mode. A commonly used term for this is REPL (read-eval-print-loop)
which will be used to refer to this interactive prompt.</p>
<section id="auto-indent">
<h2 id="auto-indent">Auto-indent<a class="headerlink" href="#auto-indent" title="永久链接至标题">¶</a></h2>
<p>When typing python statements which end in a colon (for example if, for, while)
then the prompt will change to three dots (…) and the cursor will be indented
by 4 spaces. When you press return, the next line will continue at the same
level of indentation for regular statements or an additional level of indentation
where appropriate. If you press the backspace key then it will undo one
level of indentation.</p>
<p>If your cursor is all the way back at the beginning, pressing RETURN will then
execute the code that you’ve entered. The following shows what you’d see
after entering a for statement (the underscore shows where the cursor winds up):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">_</span>
</pre></div>
</div>
<p>If you then enter an if statement, an additional level of indentation will be
provided:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">_</span>
</pre></div>
</div>
<p>Now enter <code class="docutils literal notranslate"><span class="pre">break</span></code> followed by RETURN and press BACKSPACE:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">break</span>
<span class="gp">... </span>    <span class="n">_</span>
</pre></div>
</div>
<p>Finally type <code class="docutils literal notranslate"><span class="pre">print(i)</span></code>, press RETURN, press BACKSPACE and press RETURN again:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">break</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">0</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Auto-indent won’t be applied if the previous two lines were all spaces.  This
means that you can finish entering a compound statement by pressing RETURN
twice, and then a third press will finish and execute.</p>
</section>
<section id="auto-completion">
<h2 id="auto-completion">Auto-completion<a class="headerlink" href="#auto-completion" title="永久链接至标题">¶</a></h2>
<p>While typing a command at the REPL, if the line typed so far corresponds to
the beginning of the name of something, then pressing TAB will show
possible things that could be entered. For example, first import the machine
module by entering <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">machine</span></code> and pressing RETURN.
Then type <code class="docutils literal notranslate"><span class="pre">m</span></code> and press TAB and it should expand to <code class="docutils literal notranslate"><span class="pre">machine</span></code>.
Enter a dot <code class="docutils literal notranslate"><span class="pre">.</span></code> and press TAB again. You should see something like:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">machine</span><span class="o">.</span>
<span class="go">__name__        info            unique_id       reset</span>
<span class="go">bootloader      freq            rng             idle</span>
<span class="go">sleep           deepsleep       disable_irq     enable_irq</span>
<span class="go">Pin</span>
</pre></div>
</div>
<p>The word will be expanded as much as possible until multiple possibilities exist.
For example, type <code class="docutils literal notranslate"><span class="pre">machine.Pin.AF3</span></code> and press TAB and it will expand to
<code class="docutils literal notranslate"><span class="pre">machine.Pin.AF3_TIM</span></code>. Pressing TAB a second time will show the possible
expansions:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="o">.</span><span class="n">AF3_TIM</span>
<span class="go">AF3_TIM10       AF3_TIM11       AF3_TIM8        AF3_TIM9</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="o">.</span><span class="n">AF3_TIM</span>
</pre></div>
</div>
</section>
<section id="interrupting-a-running-program">
<h2 id="interrupting-a-running-program">Interrupting a running program<a class="headerlink" href="#interrupting-a-running-program" title="永久链接至标题">¶</a></h2>
<p>You can interrupt a running program by pressing Ctrl-C. This will raise a KeyboardInterrupt
which will bring you back to the REPL, providing your program doesn’t intercept the
KeyboardInterrupt exception.</p>
<p>For example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000000</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">0</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="gp">...</span>
<span class="go">6466</span>
<span class="go">6467</span>
<span class="go">6468</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">"&lt;stdin&gt;"</span>, line <span class="m">2</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">KeyboardInterrupt</span>:
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</section>
<section id="paste-mode">
<h2 id="paste-mode">Paste mode<a class="headerlink" href="#paste-mode" title="永久链接至标题">¶</a></h2>
<p>If you want to paste some code into your terminal window, the auto-indent feature
will mess things up. For example, if you had the following python code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">'This is a test to show paste mode'</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">'Here is a second line'</span><span class="p">)</span>
<span class="n">foo</span><span class="p">()</span>
</pre></div>
</div>
<p>and you try to paste this into the normal REPL, then you will see something like
this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">'This is a test to show paste mode'</span><span class="p">)</span>
<span class="gp">... </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">'Here is a second line'</span><span class="p">)</span>
<span class="gp">... </span>            <span class="n">foo</span><span class="p">()</span>
<span class="gp">...</span>
  File <span class="nb">"&lt;stdin&gt;"</span>, line <span class="m">3</span>
<span class="gr">IndentationError</span>: <span class="n">unexpected indent</span>
</pre></div>
</div>
<p>If you press Ctrl-E, then you will enter paste mode, which essentially turns off
the auto-indent feature, and changes the prompt from <code class="docutils literal notranslate"><span class="pre">&gt;&gt;&gt;</span></code> to <code class="docutils literal notranslate"><span class="pre">===</span></code>. For example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;</span>
<span class="go">paste mode; Ctrl-C to cancel, Ctrl-D to finish</span>
<span class="go">=== def foo():</span>
<span class="go">===     print('This is a test to show paste mode')</span>
<span class="go">===     print('Here is a second line')</span>
<span class="go">=== foo()</span>
<span class="go">===</span>
<span class="go">This is a test to show paste mode</span>
<span class="go">Here is a second line</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Paste Mode allows blank lines to be pasted. The pasted text is compiled as if
it were a file. Pressing Ctrl-D exits paste mode and initiates the compilation.</p>
</section>
<section id="soft-reset">
<h2 id="soft-reset">Soft reset<a class="headerlink" href="#soft-reset" title="永久链接至标题">¶</a></h2>
<p>A soft reset will reset the python interpreter, but tries not to reset the
method by which you’re connected to the MicroPython board (USB-serial, or Wifi).</p>
<p>You can perform a soft reset from the REPL by pressing Ctrl-D, or from your python
code by executing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">machine</span><span class="o">.</span><span class="n">soft_reset</span><span class="p">()</span>
</pre></div>
</div>
<p>For example, if you reset your MicroPython board, and you execute a dir()
command, you’d see something like this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">dir</span><span class="p">()</span>
<span class="go">['__name__', 'pyb']</span>
</pre></div>
</div>
<p>Now create some variables and repeat the dir() command:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span> <span class="o">=</span> <span class="mi">23</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="s1">'abc'</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dir</span><span class="p">()</span>
<span class="go">['j', 'x', '__name__', 'pyb', 'i']</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Now if you enter Ctrl-D, and repeat the dir() command, you’ll see that your
variables no longer exist:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">MPY</span><span class="p">:</span> <span class="n">sync</span> <span class="n">filesystems</span>
<span class="n">MPY</span><span class="p">:</span> <span class="n">soft</span> <span class="n">reboot</span>
<span class="n">MicroPython</span> <span class="n">v1</span><span class="o">.</span><span class="mi">5</span><span class="o">-</span><span class="mi">51</span><span class="o">-</span><span class="n">g6f70283</span><span class="o">-</span><span class="n">dirty</span> <span class="n">on</span> <span class="mi">2015</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">30</span><span class="p">;</span> <span class="n">PYBv1</span><span class="o">.</span><span class="mi">0</span> <span class="k">with</span> <span class="n">STM32F405RG</span>
<span class="n">Type</span> <span class="s2">"help()"</span> <span class="k">for</span> <span class="n">more</span> <span class="n">information</span><span class="o">.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">dir</span><span class="p">()</span>
<span class="p">[</span><span class="s1">'__name__'</span><span class="p">,</span> <span class="s1">'pyb'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</div>
</section>
<section id="the-special-variable-underscore">
<h2 id="the-special-variable-underscore">The special variable _ (underscore)<a class="headerlink" href="#the-special-variable-underscore" title="永久链接至标题">¶</a></h2>
<p>When you use the REPL, you may perform computations and see the results.
MicroPython stores the results of the previous statement in the variable _ (underscore).
So you can use the underscore to save the result in a variable. For example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">+</span> <span class="mi">5</span>
<span class="go">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">_</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">15</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</section>
<section id="raw-mode-and-raw-paste-mode">
<h2 id="raw-mode-and-raw-paste-mode">Raw mode and raw-paste mode<a class="headerlink" href="#raw-mode-and-raw-paste-mode" title="永久链接至标题">¶</a></h2>
<p>Raw mode (also called raw REPL) is not something that a person would normally use.
It is intended for programmatic use and essentially behaves like paste mode with
echo turned off, and with optional flow control.</p>
<p>Raw mode is entered using Ctrl-A. You then send your python code, followed by
a Ctrl-D. The Ctrl-D will be acknowledged by ‘OK’ and then the python code will
be compiled and executed. Any output (or errors) will be sent back. Entering
Ctrl-B will leave raw mode and return the the regular (aka friendly) REPL.</p>
<p>Raw-paste mode is an additional mode within the raw REPL that includes flow control,
and which compiles code as it receives it. This makes it more robust for high-speed
transfer of code into the device, and it also uses less RAM when receiving because
it does not need to store a verbatim copy of the code before compiling (unlike
standard raw mode).</p>
<p>Raw-paste mode uses the following protocol:</p>
<ol class="arabic simple">
<li><p>Enter raw REPL as usual via ctrl-A.</p></li>
<li><p>Write 3 bytes: <code class="docutils literal notranslate"><span class="pre">b"\x05A\x01"</span></code> (ie ctrl-E then “A” then ctrl-A).</p></li>
<li><p>Read 2 bytes to determine if the device entered raw-paste mode:</p>
<ul class="simple">
<li><p>If the result is <code class="docutils literal notranslate"><span class="pre">b"R\x00"</span></code> then the device understands the command but
doesn’t support raw paste.</p></li>
<li><p>If the result is <code class="docutils literal notranslate"><span class="pre">b"R\x01"</span></code> then the device does support raw paste and
has entered this mode.</p></li>
<li><p>Otherwise the result should be <code class="docutils literal notranslate"><span class="pre">b"ra"</span></code> and the device doesn’t support raw
paste and the string <code class="docutils literal notranslate"><span class="pre">b"w</span> <span class="pre">REPL;</span> <span class="pre">CTRL-B</span> <span class="pre">to</span> <span class="pre">exit\r\n&gt;"</span></code> should be read and
discarded.</p></li>
</ul>
</li>
<li><p>If the device is in raw-paste mode then continue, otherwise fallback to
standard raw mode.</p></li>
<li><p>Read 2 bytes, this is the flow control window-size-increment (in bytes)
stored as a 16-bit unsigned little endian integer.  The initial value for the
remaining-window-size variable should be set to this number.</p></li>
<li><p>Write out the code to the device:</p>
<ul class="simple">
<li><p>While there are bytes to send, write up to the remaining-window-size worth
of bytes, and decrease the remaining-window-size by the number of bytes
written.</p></li>
<li><p>If the remaining-window-size is 0, or there is a byte waiting to read, read
1 byte.  If this byte is <code class="docutils literal notranslate"><span class="pre">b"\x01"</span></code> then increase the remaining-window-size
by the window-size-increment from step 5.  If this byte is <code class="docutils literal notranslate"><span class="pre">b"\x04"</span></code> then
the device wants to end the data reception, and <code class="docutils literal notranslate"><span class="pre">b"\x04"</span></code> should be
written to the device and no more code sent after that.  (Note: if there is
a byte waiting to be read from the device then it does not need to be read
and acted upon immediately, the device will continue to consume incoming
bytes as long as reamining-window-size is greater than 0.)</p></li>
</ul>
</li>
<li><p>When all code has been written to the device, write <code class="docutils literal notranslate"><span class="pre">b"\x04"</span></code> to indicate
end-of-data.</p></li>
<li><p>Read from the device until <code class="docutils literal notranslate"><span class="pre">b"\x04"</span></code> is received.  At this point the device
has received and compiled all of the code that was sent and is executing it.</p></li>
<li><p>The device outputs any characters produced by the executing code.  When (if)
the code finishes <code class="docutils literal notranslate"><span class="pre">b"\x04"</span></code> will be output, followed by any exception that
was uncaught, followed again by <code class="docutils literal notranslate"><span class="pre">b"\x04"</span></code>.  It then goes back to the
standard raw REPL and outputs <code class="docutils literal notranslate"><span class="pre">b"&gt;"</span></code>.</p></li>
</ol>
<p>For example, starting at a new line at the normal (friendly) REPL, if you write:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sa">b</span><span class="s2">"</span><span class="se">\x01\x05</span><span class="s2">A</span><span class="se">\x01</span><span class="s2">print(123)</span><span class="se">\x04</span><span class="s2">"</span>
</pre></div>
</div>
<p>Then the device will respond with something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sa">b</span><span class="s2">"</span><span class="se">\r\n</span><span class="s2">raw REPL; CTRL-B to exit</span><span class="se">\r\n</span><span class="s2">&gt;R</span><span class="se">\x01\x80\x00\x01\x04</span><span class="s2">123</span><span class="se">\r\n\x04\x04</span><span class="s2">&gt;"</span>
</pre></div>
</div>
<p>Broken down over time this looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Step 1: enter raw REPL</span>
<span class="n">write</span><span class="p">:</span> <span class="sa">b</span><span class="s2">"</span><span class="se">\x01</span><span class="s2">"</span>
<span class="n">read</span><span class="p">:</span> <span class="sa">b</span><span class="s2">"</span><span class="se">\r\n</span><span class="s2">raw REPL; CTRL-B to exit</span><span class="se">\r\n</span><span class="s2">&gt;"</span>

<span class="c1"># Step 2-5: enter raw-paste mode</span>
<span class="n">write</span><span class="p">:</span> <span class="sa">b</span><span class="s2">"</span><span class="se">\x05</span><span class="s2">A</span><span class="se">\x01</span><span class="s2">"</span>
<span class="n">read</span><span class="p">:</span> <span class="sa">b</span><span class="s2">"R</span><span class="se">\x01\x80\x00\x01</span><span class="s2">"</span>

<span class="c1"># Step 6-8: write out code</span>
<span class="n">write</span><span class="p">:</span> <span class="sa">b</span><span class="s2">"print(123)</span><span class="se">\x04</span><span class="s2">"</span>
<span class="n">read</span><span class="p">:</span> <span class="sa">b</span><span class="s2">"</span><span class="se">\x04</span><span class="s2">"</span>

<span class="c1"># Step 9: code executes and result is read</span>
<span class="n">read</span><span class="p">:</span> <span class="sa">b</span><span class="s2">"123</span><span class="se">\r\n\x04\x04</span><span class="s2">&gt;"</span>
</pre></div>
</div>
<p>In this case the flow control window-size-increment is 128 and there are two
windows worth of data immediately available at the start, one from the initial
window-size-increment value and one from the explicit <code class="docutils literal notranslate"><span class="pre">b"\x01"</span></code> value that
is sent.  So this means up to 256 bytes can be written to begin with before
waiting or checking for more incoming flow-control characters.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">tools/pyboard.py</span></code> program uses the raw REPL, including raw-paste mode, to
execute Python code on a MicroPython-enabled board.</p>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="glossary.html" title="Glossary"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Glossary </span>
              </div>
            </a>
          
          
            <a href="mpremote.html" title="MicroPython remote control: mpremote"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> MicroPython remote control: mpremote </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright - The MicroPython Documentation is Copyright © 2014-2022, Damien P. George, Paul Sokolovsky, and contributors.
              
          </div>
            Last updated on
              11 2月 2022.
            <br/>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>